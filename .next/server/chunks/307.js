exports.id=307,exports.ids=[307],exports.modules={3285:(e,r,t)=>{Promise.resolve().then(t.bind(t,19395))},43772:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},19395:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>o,aC:()=>u});var a=t(10326),s=t(17577);t(76);var n=t(2991);t(20902);let i=(0,s.createContext)(void 0);function o({children:e}){let[r,t]=(0,s.useState)(null),[o,u]=(0,s.useState)(null),[l,d]=(0,s.useState)(!0),c=async()=>{if(o)try{let e=await (0,n.Ts)();t(e)}catch(e){console.error("Error fetching user data:",e)}},m=async()=>{try{await (0,n.Mx)(),t(null),u(null)}catch(e){throw console.error("Error signing out:",e),e}};return a.jsx(i.Provider,{value:{user:r,firebaseUser:o,loading:l,signOut:m,refreshUser:c},children:e})}function u(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2991:(e,r,t)=>{"use strict";t.d(r,{Fs:()=>v,Mx:()=>w,OA:()=>m,Rg:()=>P,Ry:()=>u,Ts:()=>b,Yb:()=>l,c0:()=>h,jz:()=>c,kS:()=>x,qD:()=>p,qj:()=>d});var a=t(35957),s=t(76),n=t(20902);let i=e=>{switch(e.code){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/user-disabled":return"This account has been disabled.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";default:return e.message||"An unexpected error occurred."}},o=()=>{if(!(0,n.Wn)())throw Error("Firebase is not properly configured. Please set up your Firebase project.")},u=async(e,r)=>{o();try{let t=await (0,a.e5)(n.I8,e,r);return await f(t.user.uid),t}catch(e){throw Error(i(e))}},l=async(e,r,t,s="tenant")=>{o();try{let i=await (0,a.Xb)(n.I8,e,r);return await (0,a.ck)(i.user,{displayName:t}),await y(i.user,s),i}catch(e){throw Error(i(e))}},d=async()=>{o();try{let e=new a.hJ;e.addScope("email"),e.addScope("profile");let r=await (0,a.rh)(n.I8,e);return(await (0,s.QT)((0,s.JU)(n.db,"users",r.user.uid))).exists()?await f(r.user.uid):await y(r.user,"tenant"),r}catch(e){throw Error(i(e))}},c=e=>{throw o(),Error("Phone authentication can only be set up in the browser")},m=async(e,r)=>{o();try{return await (0,a.$g)(n.I8,e,r)}catch(e){throw Error(i(e))}},p=async(e,r)=>{try{let t=await e.confirm(r);return(await (0,s.QT)((0,s.JU)(n.db,"users",t.user.uid))).exists()?await f(t.user.uid):await y(t.user,"tenant"),t}catch(e){throw Error("Invalid verification code. Please try again.")}},h=async e=>{o();try{await (0,a.LS)(n.I8,e)}catch(e){throw Error(i(e))}},w=async()=>{o();try{await (0,a.w7)(n.I8)}catch(e){throw Error("Failed to sign out. Please try again.")}},y=async(e,r)=>{let t={id:e.uid,email:e.email,role:r,profile:{firstName:e.displayName?.split(" ")[0]||"",lastName:e.displayName?.split(" ").slice(1).join(" ")||"",avatar:e.photoURL||void 0},phone:e.phoneNumber||void 0,permissions:g(r),isActive:!0,mfaEnabled:!1,mfaSetupRequired:!1,lastLogin:(0,s.Bt)(),createdAt:(0,s.Bt)()};await (0,s.pl)((0,s.JU)(n.db,"users",e.uid),t)},f=async e=>{await (0,s.r7)((0,s.JU)(n.db,"users",e),{lastLogin:(0,s.Bt)()})},g=e=>{switch(e){case"admin":return["users:read","users:write","users:delete","properties:read","properties:write","properties:delete","leases:read","leases:write","leases:delete","maintenance:read","maintenance:write","maintenance:delete","payments:read","payments:write","payments:delete","reports:read","reports:write","settings:read","settings:write"];case"owner":return["properties:read","properties:write","leases:read","leases:write","maintenance:read","maintenance:write","payments:read","reports:read"];case"agent":return["properties:read","leases:read","leases:write","maintenance:read","maintenance:write","payments:read"];case"tenant":return["properties:read","leases:read","maintenance:read","maintenance:write","payments:read"];default:return[]}},b=async()=>{o();let e=n.I8.currentUser;if(!e)return null;let r=await (0,s.QT)((0,s.JU)(n.db,"users",e.uid));return r.exists()?r.data():null},P=async e=>{o();let r=e?await b():n.I8.currentUser?await b():null;return r?.role||null},v=async(e,r)=>{o();let t=await b();return!!t&&t.permissions.includes(e)},x=w},20902:(e,r,t)=>{"use strict";t.d(r,{I8:()=>d,Wn:()=>m,db:()=>l,tO:()=>c});var a=t(42585),s=t(76),n=t(35957),i=t(11552),o=t(8470);let u=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyD-w4tP94wfkorfa0vgKFd4kVYU-qDqe48",authDomain:"mmg-platform.firebaseapp.com",databaseURL:"https://mmg-platform-default-rtdb.europe-west1.firebasedatabase.app",projectId:"mmg-platform",storageBucket:"mmg-platform.firebasestorage.app",messagingSenderId:"220106972775",appId:"1:220106972775:web:04a44cb649fb1c617afec2"}),l=(0,s.ad)(u),d=(0,n.v0)(u),c=(0,i.cF)(u);(0,o.$C)(u);let m=()=>!0;m()||console.warn("\uD83D\uDD25 Firebase is using demo configuration. Please set up your Firebase project and update environment variables.")},36852:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o,metadata:()=>i});var a=t(19510);t(7633);var s=t(68570);let n=(0,s.createProxy)(String.raw`/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/hooks/useAuth.tsx#AuthProvider`);(0,s.createProxy)(String.raw`/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/hooks/useAuth.tsx#useAuth`),(0,s.createProxy)(String.raw`/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/hooks/useAuth.tsx#useRequireAuth`),(0,s.createProxy)(String.raw`/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/hooks/useAuth.tsx#useRequireRole`),(0,s.createProxy)(String.raw`/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/hooks/useAuth.tsx#useMockAuth`);let i={title:"MMG Platform",description:"Property management platform"};function o({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:"font-sans",children:a.jsx(n,{children:e})})})}},7633:()=>{}};