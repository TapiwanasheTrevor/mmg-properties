(()=>{var e={};e.id=479,e.ids=[479,296],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},60135:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>d}),t(16172),t(36852),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),c=t(95231),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);t.d(s,n);let d=["",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,16172)),"/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/app/documents/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,36852)),"/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/app/documents/page.tsx"],u="/documents/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/documents/page",pathname:"/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},24990:(e,s,t)=>{Promise.resolve().then(t.bind(t,80387))},80387:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>I});var a=t(10326),r=t(19395),l=t(35047),i=t(17577),c=t(33071),n=t(567),d=t(90772),o=t(54432),u=t(45842),m=t(87673),x=t(34474),p=t(43273),h=t(65304),y=t(62881);let g=(0,y.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var v=t(36283);let j=(0,y.Z)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),f=(0,y.Z)("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),N=(0,y.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),w=(0,y.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var b=t(9015);let k=(0,y.Z)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),q=(0,y.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var Z=t(41291),M=t(30361),C=t(48998),z=t(88307);let L=(0,y.Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var S=t(79635),_=t(37358),D=t(12714),P=t(31540),A=t(69508),T=t(98091),E=t(45804),R=t(11296);let B=[{value:"lease_agreement",label:"Lease Agreements",description:"Rental agreements and contracts"},{value:"tenant_application",label:"Tenant Applications",description:"Application forms and background checks"},{value:"property_documents",label:"Property Documents",description:"Deeds, titles, and property papers"},{value:"maintenance_reports",label:"Maintenance Reports",description:"Repair and maintenance documentation"},{value:"financial_records",label:"Financial Records",description:"Receipts, invoices, and financial documents"},{value:"inspection_reports",label:"Inspection Reports",description:"Property inspection and assessment reports"},{value:"legal_documents",label:"Legal Documents",description:"Legal notices, court documents, and contracts"},{value:"insurance_documents",label:"Insurance Documents",description:"Insurance policies and claims"},{value:"certificates",label:"Certificates",description:"Permits, licenses, and certificates"},{value:"photos",label:"Photos",description:"Property and unit photographs"},{value:"other",label:"Other",description:"Miscellaneous documents"}];function O({relatedResource:e,category:s}){let{user:t}=(0,r.aC)(),[l,y]=(0,i.useState)([]),[O,I]=(0,i.useState)(null),[U,H]=(0,i.useState)(!0),[V,Q]=(0,i.useState)(!1),[F,$]=(0,i.useState)(""),[G,J]=(0,i.useState)(""),[Y,W]=(0,i.useState)(""),[X,K]=(0,i.useState)(s||"all"),[ee,es]=(0,i.useState)(null),[et,ea]=(0,i.useState)(!1),[er,el]=(0,i.useState)(!1),[ei,ec]=(0,i.useState)({files:[],name:"",description:"",category:s||"other",tags:"",accessLevel:"private"}),[en,ed]=(0,i.useState)({name:"",description:"",category:"other",tags:"",accessLevel:"private"}),eo=async()=>{H(!0),$("");try{let s;if(Y)s=await (0,R.W7)(Y,t.id,{category:"all"!==X?X:void 0}),y(s);else{let a=(s=await (0,R.qi)({category:"all"!==X?X:void 0,relatedResourceType:e?.type,relatedResourceId:e?.id,isActive:!0,pageSize:100})).documents.filter(e=>(0,R.Q4)(e,t.id,"view"));y(a)}}catch(e){$(e.message)}finally{H(!1)}},eu=async()=>{try{let e=await (0,R.T8)(t?.id);I(e)}catch(e){console.error("Error loading statistics:",e)}},em=async a=>{if(a.preventDefault(),t&&0!==ei.files.length){Q(!0),$("");try{let a=ei.files.map(async(s,a)=>{let r=ei.files.length>1?`${ei.name} (${a+1})`:ei.name;return await (0,R.uploadDocument)(s,{name:r,description:ei.description,category:ei.category,tags:ei.tags.split(",").map(e=>e.trim()).filter(Boolean),relatedResource:e,accessLevel:ei.accessLevel},t.id,t.name,t.role)});await Promise.all(a),J(`Successfully uploaded ${ei.files.length} document(s)!`),ea(!1),ec({files:[],name:"",description:"",category:s||"other",tags:"",accessLevel:"private"}),await eo(),await eu()}catch(e){$(e.message)}finally{Q(!1)}}},ex=async e=>{if(e.preventDefault(),t&&ee)try{await (0,R.gU)(ee.id,{name:en.name,description:en.description,category:en.category,tags:en.tags.split(",").map(e=>e.trim()).filter(Boolean),accessLevel:en.accessLevel},t.id,t.role),J("Document updated successfully!"),el(!1),es(null),await eo()}catch(e){$(e.message)}},ep=async e=>{if(t&&confirm("Are you sure you want to delete this document?"))try{await (0,R.iH)(e.id,t.id,t.role),J("Document deleted successfully!"),await eo(),await eu()}catch(e){$(e.message)}},eh=e=>{es(e),ed({name:e.name,description:e.description||"",category:e.category,tags:e.tags.join(", "),accessLevel:e.accessLevel}),el(!0)},ey=e=>e.startsWith("image/")?a.jsx(g,{className:"w-5 h-5"}):"application/pdf"===e?a.jsx(v.Z,{className:"w-5 h-5"}):e.includes("spreadsheet")||e.includes("excel")?a.jsx(j,{className:"w-5 h-5"}):e.startsWith("video/")?a.jsx(f,{className:"w-5 h-5"}):a.jsx(N,{className:"w-5 h-5"}),eg=e=>{switch(e){case"public":return a.jsx(w,{className:"w-4 h-4 text-green-600"});case"restricted":return a.jsx(b.Z,{className:"w-4 h-4 text-red-600"});default:return a.jsx(k,{className:"w-4 h-4 text-blue-600"})}},ev=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return U&&0===l.length?(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>a.jsx(c.Zb,{children:(0,a.jsxs)(c.aY,{className:"pt-6",children:[a.jsx(h.O,{className:"h-8 w-16 mb-2"}),a.jsx(h.O,{className:"h-4 w-24"})]})},e))}),a.jsx(c.Zb,{children:a.jsx(c.aY,{className:"pt-6",children:a.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>a.jsx(h.O,{className:"h-16 w-full"},e))})})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Document Manager"}),a.jsx("p",{className:"text-muted-foreground",children:e?`Documents for ${e.name}`:"Manage all documents and files"})]}),(0,a.jsxs)(d.z,{onClick:()=>ea(!0),children:[a.jsx(q,{className:"mr-2 h-4 w-4"}),"Upload Documents"]})]}),F&&(0,a.jsxs)(p.bZ,{variant:"destructive",children:[a.jsx(Z.Z,{className:"h-4 w-4"}),a.jsx(p.X,{children:F})]}),G&&(0,a.jsxs)(p.bZ,{children:[a.jsx(M.Z,{className:"h-4 w-4"}),a.jsx(p.X,{children:G})]}),O&&!e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(c.Zb,{children:a.jsx(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(v.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Documents"}),a.jsx("p",{className:"text-2xl font-bold",children:O.total})]})]})})}),a.jsx(c.Zb,{children:a.jsx(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(q,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Size"}),a.jsx("p",{className:"text-2xl font-bold",children:ev(O.totalSize)})]})]})})}),a.jsx(c.Zb,{children:a.jsx(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(w,{className:"h-4 w-4 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Public Docs"}),a.jsx("p",{className:"text-2xl font-bold",children:O.byAccessLevel.public||0})]})]})})}),a.jsx(c.Zb,{children:a.jsx(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(C.Z,{className:"h-4 w-4 text-orange-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Recent Uploads"}),a.jsx("p",{className:"text-2xl font-bold",children:O.recentUploads.length})]})]})})})]}),a.jsx(c.Zb,{children:a.jsx(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(z.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(o.I,{placeholder:"Search documents...",value:Y,onChange:e=>W(e.target.value),className:"pl-8"})]})}),(0,a.jsxs)(x.Ph,{value:X,onValueChange:K,children:[a.jsx(x.i4,{className:"w-[200px]",children:a.jsx(x.ki,{})}),(0,a.jsxs)(x.Bw,{children:[a.jsx(x.Ql,{value:"all",children:"All Categories"}),B.map(e=>a.jsx(x.Ql,{value:e.value,children:e.label},e.value))]})]})]})})}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsxs)(c.ll,{children:["Documents (",l.length,")"]}),a.jsx(c.SZ,{children:"all"!==X?`Showing ${B.find(e=>e.value===X)?.label} documents`:"All documents"})]}),a.jsx(c.aY,{children:0===l.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(v.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No documents found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:Y?"No documents match your search criteria.":"No documents have been uploaded yet."}),(0,a.jsxs)(d.z,{onClick:()=>ea(!0),children:[a.jsx(q,{className:"mr-2 h-4 w-4"}),"Upload First Document"]})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:l.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[ey(e.mimeType),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-sm truncate",children:e.name}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.fileName})]})]}),eg(e.accessLevel)]}),(0,a.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(n.C,{className:"text-xs",children:B.find(s=>s.value===e.category)?.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:ev(e.fileSize)})]}),e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,3).map((e,s)=>(0,a.jsxs)(n.C,{variant:"outline",className:"text-xs",children:[a.jsx(L,{className:"w-2 h-2 mr-1"}),e]},s)),e.tags.length>3&&(0,a.jsxs)(n.C,{variant:"outline",className:"text-xs",children:["+",e.tags.length-3," more"]})]}),e.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(S.Z,{className:"w-3 h-3"}),a.jsx("span",{children:e.uploadedByName})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(_.Z,{className:"w-3 h-3"}),a.jsx("span",{children:(0,E.WU)(e.createdAt.toDate(),"MMM dd, yyyy")})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>window.open(e.downloadUrl,"_blank"),children:[a.jsx(D.Z,{className:"w-3 h-3 mr-1"}),"View"]}),a.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>{let s=e.createElement("a");s.href=e.downloadUrl,s.download=e.fileName,s.click()},children:a.jsx(P.Z,{className:"w-3 h-3"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,R.Q4)(e,t.id,"edit")&&a.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>eh(e),children:a.jsx(A.Z,{className:"w-3 h-3"})}),(0,R.Q4)(e,t.id,"delete")&&a.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>ep(e),className:"text-red-600 hover:text-red-700",children:a.jsx(T.Z,{className:"w-3 h-3"})})]})]})]},e.id))})})]}),et&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(c.Ol,{children:a.jsx(c.ll,{children:"Upload Documents"})}),a.jsx(c.aY,{children:(0,a.jsxs)("form",{onSubmit:em,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Files *"}),a.jsx(o.I,{type:"file",multiple:!0,onChange:e=>{let s=Array.from(e.target.files||[]);ec(e=>({...e,files:s})),s.length>0&&!ei.name&&ec(e=>({...e,name:s[0].name.replace(/\.[^/.]+$/,"")}))},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.xls,.xlsx,.ppt,.pptx",required:!0}),ei.files.length>0&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Selected ",ei.files.length," file(s): ",ei.files.map(e=>e.name).join(", ")]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Document Name *"}),a.jsx(o.I,{value:ei.name,onChange:e=>ec(s=>({...s,name:e.target.value})),placeholder:"Enter document name",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Category *"}),(0,a.jsxs)(x.Ph,{value:ei.category,onValueChange:e=>ec(s=>({...s,category:e})),children:[a.jsx(x.i4,{children:a.jsx(x.ki,{})}),a.jsx(x.Bw,{children:B.map(e=>a.jsx(x.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Access Level"}),(0,a.jsxs)(x.Ph,{value:ei.accessLevel,onValueChange:e=>ec(s=>({...s,accessLevel:e})),children:[a.jsx(x.i4,{children:a.jsx(x.ki,{})}),(0,a.jsxs)(x.Bw,{children:[a.jsx(x.Ql,{value:"private",children:"Private"}),a.jsx(x.Ql,{value:"public",children:"Public"}),a.jsx(x.Ql,{value:"restricted",children:"Restricted"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Tags (Optional)"}),a.jsx(o.I,{value:ei.tags,onChange:e=>ec(s=>({...s,tags:e.target.value})),placeholder:"Enter tags separated by commas"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Description (Optional)"}),a.jsx(m.g,{value:ei.description,onChange:e=>ec(s=>({...s,description:e.target.value})),placeholder:"Enter document description",rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx(d.z,{type:"button",variant:"outline",onClick:()=>ea(!1),children:"Cancel"}),a.jsx(d.z,{type:"submit",disabled:V,children:V?"Uploading...":"Upload Documents"})]})]})})]})}),er&&ee&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(c.Ol,{children:a.jsx(c.ll,{children:"Edit Document"})}),a.jsx(c.aY,{children:(0,a.jsxs)("form",{onSubmit:ex,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Document Name *"}),a.jsx(o.I,{value:en.name,onChange:e=>ed(s=>({...s,name:e.target.value})),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Category *"}),(0,a.jsxs)(x.Ph,{value:en.category,onValueChange:e=>ed(s=>({...s,category:e})),children:[a.jsx(x.i4,{children:a.jsx(x.ki,{})}),a.jsx(x.Bw,{children:B.map(e=>a.jsx(x.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Access Level"}),(0,a.jsxs)(x.Ph,{value:en.accessLevel,onValueChange:e=>ed(s=>({...s,accessLevel:e})),children:[a.jsx(x.i4,{children:a.jsx(x.ki,{})}),(0,a.jsxs)(x.Bw,{children:[a.jsx(x.Ql,{value:"private",children:"Private"}),a.jsx(x.Ql,{value:"public",children:"Public"}),a.jsx(x.Ql,{value:"restricted",children:"Restricted"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Tags"}),a.jsx(o.I,{value:en.tags,onChange:e=>ed(s=>({...s,tags:e.target.value})),placeholder:"Enter tags separated by commas"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(u._,{children:"Description"}),a.jsx(m.g,{value:en.description,onChange:e=>ed(s=>({...s,description:e.target.value})),rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx(d.z,{type:"button",variant:"outline",onClick:()=>el(!1),children:"Cancel"}),a.jsx(d.z,{type:"submit",children:"Save Changes"})]})]})})]})})]})}function I(){let{user:e,loading:s}=(0,r.aC)();return s?a.jsx("div",{children:"Loading..."}):(e||(0,l.redirect)("/login"),a.jsx("div",{className:"max-w-7xl mx-auto p-6",children:a.jsx(O,{})}))}},11296:(e,s,t)=>{"use strict";t.d(s,{Q4:()=>h,T8:()=>p,W7:()=>x,gU:()=>u,iH:()=>m,qi:()=>o,uploadDocument:()=>n});var a=t(76),r=t(11552),l=t(20902),i=t(63324);let c=(0,a.hJ)(l.db,"documents");(0,a.hJ)(l.db,"document_folders");let n=async(e,s,t,n,d)=>{try{let o=Date.now(),u=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),m=`${o}_${u}`,x=s.folderId?`documents/${s.folderId}`:"documents/general",p=(0,r.iH)(l.tO,`${x}/${m}`),h=await (0,r.KV)(p,e),y=await (0,r.Jt)(h.ref),g={name:s.name,description:s.description,fileName:e.name,fileSize:e.size,mimeType:e.type,category:s.category,tags:s.tags||[],uploadedBy:t,uploadedByName:n,uploadedByRole:d,relatedResource:s.relatedResource,accessLevel:s.accessLevel||"private",permissions:{view:s.permissions?.view||[t],edit:s.permissions?.edit||[t],delete:s.permissions?.delete||[t]},downloadUrl:y,storageRef:h.ref.fullPath,version:1,isActive:!0,metadata:{width:void 0,height:void 0,pageCount:void 0,extractedText:void 0},createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()},v=await (0,a.ET)(c,g);return await i.Cv.logDataExport(t,d,"document",{action:"upload",documentId:v.id,fileName:e.name,fileSize:e.size,category:s.category}),v.id}catch(e){throw console.error("Error uploading document:",e),e}},d=async e=>{try{let s=(0,a.JU)(l.db,"documents",e),t=await (0,a.QT)(s);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("Error getting document:",e),e}},o=async(e={})=>{try{let s=(0,a.IO)(c);e.category&&(s=(0,a.IO)(s,(0,a.ar)("category","==",e.category))),e.relatedResourceType&&e.relatedResourceId&&(s=(0,a.IO)(s,(0,a.ar)("relatedResource.type","==",e.relatedResourceType)),s=(0,a.IO)(s,(0,a.ar)("relatedResource.id","==",e.relatedResourceId))),e.uploadedBy&&(s=(0,a.IO)(s,(0,a.ar)("uploadedBy","==",e.uploadedBy))),e.accessLevel&&(s=(0,a.IO)(s,(0,a.ar)("accessLevel","==",e.accessLevel))),void 0!==e.isActive&&(s=(0,a.IO)(s,(0,a.ar)("isActive","==",e.isActive))),s=(0,a.IO)(s,(0,a.Xo)("createdAt","desc")),e.pageSize&&(s=(0,a.IO)(s,(0,a.b9)(e.pageSize)));let t=await (0,a.PL)(s),r=[];return t.forEach(e=>{r.push({id:e.id,...e.data()})}),{documents:r,total:r.length}}catch(e){throw console.error("Error getting documents:",e),e}},u=async(e,s,t,r)=>{try{let c=(0,a.JU)(l.db,"documents",e);await (0,a.r7)(c,{...s,updatedAt:(0,a.Bt)()}),await i.Cv.logDataExport(t,r,"document",{action:"update",documentId:e,updates:s})}catch(e){throw console.error("Error updating document:",e),e}},m=async(e,s,t)=>{try{let c=await d(e);if(!c)throw Error("Document not found");let n=(0,r.iH)(l.tO,c.storageRef);await (0,r.oq)(n);let o=(0,a.JU)(l.db,"documents",e);await (0,a.oe)(o),await i.Cv.logDataExport(s,t,"document",{action:"delete",documentId:e,fileName:c.fileName})}catch(e){throw console.error("Error deleting document:",e),e}},x=async(e,s,t={})=>{try{let{documents:a}=await o({pageSize:1e3}),r=a.filter(e=>"public"===e.accessLevel||e.permissions.view.includes(s)||e.uploadedBy===s),l=e.toLowerCase();return r.filter(s=>{let a=!e||s.name.toLowerCase().includes(l)||s.description?.toLowerCase().includes(l)||s.fileName.toLowerCase().includes(l)||s.tags.some(e=>e.toLowerCase().includes(l)),r=!t.category||s.category===t.category,i=!t.tags?.length||t.tags.some(e=>s.tags.includes(e)),c=s.createdAt.toDate(),n=!t.dateFrom||c>=t.dateFrom,d=!t.dateTo||c<=t.dateTo;return a&&r&&i&&n&&d}).sort((e,s)=>s.createdAt.toDate().getTime()-e.createdAt.toDate().getTime())}catch(e){throw console.error("Error searching documents:",e),e}},p=async e=>{try{let{documents:s}=await o({pageSize:1e4}),t=e?s.filter(s=>s.uploadedBy===e):s,a={total:t.length,totalSize:t.reduce((e,s)=>e+s.fileSize,0),byCategory:{},byAccessLevel:{},byMimeType:{},recentUploads:t.sort((e,s)=>s.createdAt.toDate().getTime()-e.createdAt.toDate().getTime()).slice(0,10),largestFiles:t.sort((e,s)=>s.fileSize-e.fileSize).slice(0,10)};return t.forEach(e=>{a.byCategory[e.category]=(a.byCategory[e.category]||0)+1,a.byAccessLevel[e.accessLevel]=(a.byAccessLevel[e.accessLevel]||0)+1,a.byMimeType[e.mimeType]=(a.byMimeType[e.mimeType]||0)+1}),a}catch(e){throw console.error("Error getting document statistics:",e),e}},h=(e,s,t)=>e.uploadedBy===s||"view"===t&&"public"===e.accessLevel||e.permissions[t]?.includes(s)||!1},37358:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},30361:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},31540:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},36283:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},9015:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},88307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},69508:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},98091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},79635:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},16172:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/memimal/Desktop/PROJECTS/MMG/mmg-platform/app/documents/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[100,825,423,344,804,506,307,488],()=>t(60135));module.exports=a})();