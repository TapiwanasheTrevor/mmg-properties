(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{94801:function(e,t,n){Promise.resolve().then(n.bind(n,77051))},77051:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var a=n(57437),r=n(3612),i=n(99376),s=n(2265),l=n(66070),o=n(35974),d=n(62869),c=n(95186),m=n(26815),p=n(76818),u=n(53647),y=n(65613),x=n(93022),h=n(12339),g=n(11),b=n(31047),v=n(95805),f=n(29525),j=n(14938),N=n(88226),w=n(48736),C=n(89345),D=n(99397),k=n(49322),q=n(41671),P=n(90740),M=n(73247),E=n(42208),S=n(15868),Z=n(18930),A=n(44743),T=n(52093),L=n(5978),I=n(17293),R=n(51149);let z=(0,L.hJ)(I.db,"email_templates"),O=(0,L.hJ)(I.db,"email_notifications"),U=[{name:"Welcome New Tenant",description:"Welcome email sent to new tenants when they join",category:"welcome",subject:"Welcome to {{propertyName}} - Your Tenancy Begins!",htmlContent:'\n      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">\n        <div style="text-align: center; margin-bottom: 30px;">\n          <h1 style="color: #2563eb; margin-bottom: 10px;">Welcome to MMG Property Consultancy</h1>\n          <p style="font-size: 16px; color: #666;">Your new home awaits!</p>\n        </div>\n        \n        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">\n          <h2 style="color: #1f2937; margin-top: 0;">Dear {{tenantName}},</h2>\n          <p>Welcome to your new home at <strong>{{propertyName}}</strong>! We\'re excited to have you as part of our community.</p>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <h3 style="color: #1f2937;">Your Lease Details:</h3>\n          <ul style="line-height: 1.8;">\n            <li><strong>Property:</strong> {{propertyAddress}}</li>\n            <li><strong>Unit:</strong> {{unitLabel}}</li>\n            <li><strong>Lease Start:</strong> {{leaseStartDate}}</li>\n            <li><strong>Lease End:</strong> {{leaseEndDate}}</li>\n            <li><strong>Monthly Rent:</strong> {{rentAmount}}</li>\n            <li><strong>Payment Due:</strong> {{paymentDueDate}} of each month</li>\n          </ul>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <h3 style="color: #1f2937;">Important Information:</h3>\n          <ul style="line-height: 1.8;">\n            <li><strong>Property Manager:</strong> {{agentName}} ({{agentContact}})</li>\n            <li><strong>Emergency Contact:</strong> {{emergencyContact}}</li>\n            <li><strong>Maintenance Requests:</strong> Submit through the tenant portal</li>\n            <li><strong>Rent Payments:</strong> {{paymentInstructions}}</li>\n          </ul>\n        </div>\n        \n        <div style="background-color: #dbeafe; padding: 15px; border-radius: 8px; margin-bottom: 20px;">\n          <p style="margin: 0; color: #1e40af;">\n            <strong>\uD83D\uDCF1 Download our tenant app for easy access to:</strong><br>\n            • Pay rent online<br>\n            • Submit maintenance requests<br>\n            • Access important documents<br>\n            • Communicate with your property manager\n          </p>\n        </div>\n        \n        <div style="text-align: center; margin-top: 30px;">\n          <p>If you have any questions, please don\'t hesitate to contact us.</p>\n          <p style="font-weight: bold;">Welcome home!</p>\n        </div>\n        \n        <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #e5e7eb; padding-top: 20px;">\n          <p>MMG Property Consultancy<br>\n          Email: info@mmgproperty.com<br>\n          This is an automated message, please do not reply directly to this email.</p>\n        </div>\n      </div>\n    ',textContent:"\nWelcome to MMG Property Consultancy\n\nDear {{tenantName}},\n\nWelcome to your new home at {{propertyName}}! We're excited to have you as part of our community.\n\nYour Lease Details:\n- Property: {{propertyAddress}}\n- Unit: {{unitLabel}}\n- Lease Start: {{leaseStartDate}}\n- Lease End: {{leaseEndDate}}\n- Monthly Rent: {{rentAmount}}\n- Payment Due: {{paymentDueDate}} of each month\n\nImportant Information:\n- Property Manager: {{agentName}} ({{agentContact}})\n- Emergency Contact: {{emergencyContact}}\n- Maintenance Requests: Submit through the tenant portal\n- Rent Payments: {{paymentInstructions}}\n\nDownload our tenant app for easy access to pay rent, submit maintenance requests, access documents, and communicate with your property manager.\n\nIf you have any questions, please don't hesitate to contact us.\n\nWelcome home!\n\nMMG Property Consultancy\nEmail: info@mmgproperty.com\n    ",variables:[{name:"tenantName",label:"Tenant Name",description:"Full name of the tenant",required:!0},{name:"propertyName",label:"Property Name",description:"Name of the property",required:!0},{name:"propertyAddress",label:"Property Address",description:"Full address of the property",required:!0},{name:"unitLabel",label:"Unit Label",description:"Unit number or identifier",required:!0},{name:"leaseStartDate",label:"Lease Start Date",description:"When the lease begins",required:!0},{name:"leaseEndDate",label:"Lease End Date",description:"When the lease ends",required:!0},{name:"rentAmount",label:"Rent Amount",description:"Monthly rent amount",required:!0},{name:"paymentDueDate",label:"Payment Due Date",description:"Day of month rent is due",required:!0},{name:"agentName",label:"Agent Name",description:"Property manager name",required:!0},{name:"agentContact",label:"Agent Contact",description:"Property manager contact info",required:!0},{name:"emergencyContact",label:"Emergency Contact",description:"Emergency contact information",required:!0},{name:"paymentInstructions",label:"Payment Instructions",description:"How to pay rent",required:!0}]},{name:"Rent Payment Reminder",description:"Reminder sent to tenants about upcoming rent payments",category:"reminder",subject:"Rent Payment Reminder - Due {{dueDate}}",htmlContent:'\n      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">\n        <div style="text-align: center; margin-bottom: 30px;">\n          <h1 style="color: #2563eb;">Rent Payment Reminder</h1>\n        </div>\n        \n        <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 20px; border-radius: 8px; margin-bottom: 20px;">\n          <h2 style="color: #856404; margin-top: 0;">Dear {{tenantName}},</h2>\n          <p>This is a friendly reminder that your rent payment is due on <strong>{{dueDate}}</strong>.</p>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <h3 style="color: #1f2937;">Payment Details:</h3>\n          <table style="width: 100%; border-collapse: collapse;">\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Property:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{propertyName}}</td>\n            </tr>\n            <tr>\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Unit:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{unitLabel}}</td>\n            </tr>\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Amount Due:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6; font-weight: bold; color: #dc3545;">{{amountDue}}</td>\n            </tr>\n            <tr>\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Due Date:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{dueDate}}</td>\n            </tr>\n          </table>\n        </div>\n        \n        <div style="background-color: #d1ecf1; border: 1px solid #bee5eb; padding: 15px; border-radius: 8px; margin-bottom: 20px;">\n          <h4 style="color: #0c5460; margin-top: 0;">Payment Options:</h4>\n          <p style="margin: 0;">{{paymentInstructions}}</p>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <p><strong>Late Payment:</strong> Please note that payments received after {{dueDate}} may be subject to late fees as outlined in your lease agreement.</p>\n        </div>\n        \n        <div style="text-align: center; margin-top: 30px;">\n          <p>If you have any questions about your payment, please contact your property manager:</p>\n          <p style="font-weight: bold;">{{agentName}}<br>{{agentContact}}</p>\n        </div>\n        \n        <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #e5e7eb; padding-top: 20px;">\n          <p>MMG Property Consultancy<br>\n          This is an automated reminder. Please do not reply directly to this email.</p>\n        </div>\n      </div>\n    ',textContent:"\nRent Payment Reminder\n\nDear {{tenantName}},\n\nThis is a friendly reminder that your rent payment is due on {{dueDate}}.\n\nPayment Details:\n- Property: {{propertyName}}\n- Unit: {{unitLabel}}\n- Amount Due: {{amountDue}}\n- Due Date: {{dueDate}}\n\nPayment Options:\n{{paymentInstructions}}\n\nLate Payment: Please note that payments received after {{dueDate}} may be subject to late fees as outlined in your lease agreement.\n\nIf you have any questions about your payment, please contact your property manager:\n{{agentName}}\n{{agentContact}}\n\nMMG Property Consultancy\n    ",variables:[{name:"tenantName",label:"Tenant Name",description:"Full name of the tenant",required:!0},{name:"propertyName",label:"Property Name",description:"Name of the property",required:!0},{name:"unitLabel",label:"Unit Label",description:"Unit number or identifier",required:!0},{name:"amountDue",label:"Amount Due",description:"Total amount due",required:!0},{name:"dueDate",label:"Due Date",description:"When payment is due",required:!0},{name:"paymentInstructions",label:"Payment Instructions",description:"How to make payment",required:!0},{name:"agentName",label:"Agent Name",description:"Property manager name",required:!0},{name:"agentContact",label:"Agent Contact",description:"Property manager contact",required:!0}]},{name:"Maintenance Request Confirmation",description:"Confirmation sent when a maintenance request is submitted",category:"maintenance",subject:"Maintenance Request Received - Ticket #{{ticketNumber}}",htmlContent:'\n      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">\n        <div style="text-align: center; margin-bottom: 30px;">\n          <h1 style="color: #2563eb;">Maintenance Request Confirmed</h1>\n        </div>\n        \n        <div style="background-color: #d4edda; border: 1px solid #c3e6cb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">\n          <h2 style="color: #155724; margin-top: 0;">Request Received</h2>\n          <p>We have received your maintenance request and assigned it ticket number <strong>#{{ticketNumber}}</strong>.</p>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <h3 style="color: #1f2937;">Request Details:</h3>\n          <table style="width: 100%; border-collapse: collapse;">\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Ticket Number:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">#{{ticketNumber}}</td>\n            </tr>\n            <tr>\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Property:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{propertyName}}</td>\n            </tr>\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Unit:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{unitLabel}}</td>\n            </tr>\n            <tr>\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Category:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{category}}</td>\n            </tr>\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Priority:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{priority}}</td>\n            </tr>\n            <tr>\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Submitted:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{submittedDate}}</td>\n            </tr>\n          </table>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <h4 style="color: #1f2937;">Description:</h4>\n          <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px;">\n            {{description}}\n          </div>\n        </div>\n        \n        <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 8px; margin-bottom: 20px;">\n          <h4 style="color: #856404; margin-top: 0;">What happens next?</h4>\n          <ul style="margin: 0; color: #856404;">\n            <li>Our maintenance team will review your request</li>\n            <li>You\'ll receive updates via email and SMS</li>\n            <li>A technician will be scheduled for {{expectedTimeframe}}</li>\n            <li>Please ensure access to the unit during scheduled times</li>\n          </ul>\n        </div>\n        \n        <div style="text-align: center; margin-top: 30px;">\n          <p>For urgent issues, please contact:</p>\n          <p style="font-weight: bold;">{{emergencyContact}}</p>\n          <p>Track your request status in the tenant portal or contact your property manager:</p>\n          <p style="font-weight: bold;">{{agentName}}<br>{{agentContact}}</p>\n        </div>\n        \n        <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #e5e7eb; padding-top: 20px;">\n          <p>MMG Property Consultancy<br>\n          This is an automated confirmation. Please do not reply directly to this email.</p>\n        </div>\n      </div>\n    ',textContent:"\nMaintenance Request Confirmed\n\nWe have received your maintenance request and assigned it ticket number #{{ticketNumber}}.\n\nRequest Details:\n- Ticket Number: #{{ticketNumber}}\n- Property: {{propertyName}}\n- Unit: {{unitLabel}}\n- Category: {{category}}\n- Priority: {{priority}}\n- Submitted: {{submittedDate}}\n\nDescription:\n{{description}}\n\nWhat happens next?\n- Our maintenance team will review your request\n- You'll receive updates via email and SMS\n- A technician will be scheduled for {{expectedTimeframe}}\n- Please ensure access to the unit during scheduled times\n\nFor urgent issues, please contact: {{emergencyContact}}\n\nTrack your request status in the tenant portal or contact your property manager:\n{{agentName}}\n{{agentContact}}\n\nMMG Property Consultancy\n    ",variables:[{name:"ticketNumber",label:"Ticket Number",description:"Maintenance request ticket number",required:!0},{name:"propertyName",label:"Property Name",description:"Name of the property",required:!0},{name:"unitLabel",label:"Unit Label",description:"Unit number or identifier",required:!0},{name:"category",label:"Category",description:"Type of maintenance request",required:!0},{name:"priority",label:"Priority",description:"Priority level of the request",required:!0},{name:"submittedDate",label:"Submitted Date",description:"When the request was submitted",required:!0},{name:"description",label:"Description",description:"Description of the issue",required:!0},{name:"expectedTimeframe",label:"Expected Timeframe",description:"When maintenance is expected",required:!0},{name:"emergencyContact",label:"Emergency Contact",description:"Emergency contact information",required:!0},{name:"agentName",label:"Agent Name",description:"Property manager name",required:!0},{name:"agentContact",label:"Agent Contact",description:"Property manager contact",required:!0}]},{name:"Lease Expiration Notice",description:"Notice sent to tenants about upcoming lease expiration",category:"lease",subject:"Important: Your Lease Expires on {{expirationDate}}",htmlContent:'\n      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">\n        <div style="text-align: center; margin-bottom: 30px;">\n          <h1 style="color: #dc3545;">Lease Expiration Notice</h1>\n        </div>\n        \n        <div style="background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">\n          <h2 style="color: #721c24; margin-top: 0;">Important Notice</h2>\n          <p>Your lease for <strong>{{propertyName}}, {{unitLabel}}</strong> is set to expire on <strong>{{expirationDate}}</strong>.</p>\n          <p>This is {{daysUntilExpiration}} days from today.</p>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <h3 style="color: #1f2937;">Lease Information:</h3>\n          <table style="width: 100%; border-collapse: collapse;">\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Property:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{propertyName}}</td>\n            </tr>\n            <tr>\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Unit:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{unitLabel}}</td>\n            </tr>\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Current Rent:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{currentRent}}</td>\n            </tr>\n            <tr>\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Lease Start:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6;">{{leaseStartDate}}</td>\n            </tr>\n            <tr style="background-color: #f8f9fa;">\n              <td style="padding: 10px; border: 1px solid #dee2e6;"><strong>Lease End:</strong></td>\n              <td style="padding: 10px; border: 1px solid #dee2e6; color: #dc3545; font-weight: bold;">{{expirationDate}}</td>\n            </tr>\n          </table>\n        </div>\n        \n        <div style="background-color: #d1ecf1; border: 1px solid #bee5eb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">\n          <h3 style="color: #0c5460; margin-top: 0;">Your Options:</h3>\n          \n          <div style="margin-bottom: 15px;">\n            <h4 style="color: #0c5460; margin-bottom: 5px;">\uD83D\uDD04 Renew Your Lease</h4>\n            <p style="margin: 0;">We\'d love to have you stay! Contact us to discuss renewal terms.</p>\n            {{#if renewalTerms}}\n            <p style="margin: 5px 0 0 0; font-weight: bold;">Proposed renewal: {{renewalTerms}}</p>\n            {{/if}}\n          </div>\n          \n          <div style="margin-bottom: 15px;">\n            <h4 style="color: #0c5460; margin-bottom: 5px;">\uD83C\uDFC3‍♂️ Moving Out</h4>\n            <p style="margin: 0;">If you plan to move out, please provide {{noticeRequired}} days written notice.</p>\n          </div>\n          \n          <div>\n            <h4 style="color: #0c5460; margin-bottom: 5px;">\uD83D\uDCC5 Important Deadlines</h4>\n            <ul style="margin: 0;">\n              <li>Notice required by: {{noticeDeadline}}</li>\n              <li>Move-out inspection: {{moveOutInspectionDate}}</li>\n              <li>Final move-out date: {{expirationDate}}</li>\n            </ul>\n          </div>\n        </div>\n        \n        <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 8px; margin-bottom: 20px;">\n          <p style="margin: 0; color: #856404;">\n            <strong>⚠️ Action Required:</strong> Please contact us within the next {{daysToRespond}} days to let us know your intentions.\n          </p>\n        </div>\n        \n        <div style="text-align: center; margin-top: 30px;">\n          <p>To discuss renewal or provide notice, please contact your property manager:</p>\n          <p style="font-weight: bold;">{{agentName}}<br>{{agentContact}}</p>\n        </div>\n        \n        <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666; border-top: 1px solid #e5e7eb; padding-top: 20px;">\n          <p>MMG Property Consultancy<br>\n          This is an important lease notice. Please respond promptly.</p>\n        </div>\n      </div>\n    ',textContent:"\nLease Expiration Notice\n\nImportant Notice: Your lease for {{propertyName}}, {{unitLabel}} is set to expire on {{expirationDate}}. This is {{daysUntilExpiration}} days from today.\n\nLease Information:\n- Property: {{propertyName}}\n- Unit: {{unitLabel}}\n- Current Rent: {{currentRent}}\n- Lease Start: {{leaseStartDate}}\n- Lease End: {{expirationDate}}\n\nYour Options:\n\n1. Renew Your Lease\n   We'd love to have you stay! Contact us to discuss renewal terms.\n   {{#if renewalTerms}}Proposed renewal: {{renewalTerms}}{{/if}}\n\n2. Moving Out\n   If you plan to move out, please provide {{noticeRequired}} days written notice.\n\nImportant Deadlines:\n- Notice required by: {{noticeDeadline}}\n- Move-out inspection: {{moveOutInspectionDate}}\n- Final move-out date: {{expirationDate}}\n\nAction Required: Please contact us within the next {{daysToRespond}} days to let us know your intentions.\n\nTo discuss renewal or provide notice, please contact your property manager:\n{{agentName}}\n{{agentContact}}\n\nMMG Property Consultancy\n    ",variables:[{name:"propertyName",label:"Property Name",description:"Name of the property",required:!0},{name:"unitLabel",label:"Unit Label",description:"Unit number or identifier",required:!0},{name:"expirationDate",label:"Expiration Date",description:"When the lease expires",required:!0},{name:"daysUntilExpiration",label:"Days Until Expiration",description:"Number of days until lease expires",required:!0},{name:"currentRent",label:"Current Rent",description:"Current monthly rent amount",required:!0},{name:"leaseStartDate",label:"Lease Start Date",description:"When the current lease started",required:!0},{name:"renewalTerms",label:"Renewal Terms",description:"Proposed renewal terms",required:!1},{name:"noticeRequired",label:"Notice Required",description:"Days of notice required",required:!0},{name:"noticeDeadline",label:"Notice Deadline",description:"Deadline to provide notice",required:!0},{name:"moveOutInspectionDate",label:"Move-out Inspection Date",description:"When move-out inspection will occur",required:!0},{name:"daysToRespond",label:"Days to Respond",description:"Days tenant has to respond",required:!0},{name:"agentName",label:"Agent Name",description:"Property manager name",required:!0},{name:"agentContact",label:"Agent Contact",description:"Property manager contact",required:!0}]}],W=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,L.IO)(z);e.category&&(t=(0,L.IO)(t,(0,L.ar)("category","==",e.category))),void 0!==e.active&&(t=(0,L.IO)(t,(0,L.ar)("isActive","==",e.active))),t=(0,L.IO)(t,(0,L.Xo)("name"));let n=await (0,L.PL)(t),a=[];if(n.forEach(e=>{a.push({id:e.id,...e.data()})}),0===a.length&&!e.category)return await F(),W(e);return a}catch(e){throw console.error("Error getting email templates:",e),e}},_=async e=>{try{let t=(0,L.JU)(I.db,"email_templates",e),n=await (0,L.QT)(t);if(n.exists())return{id:n.id,...n.data()};return null}catch(e){throw console.error("Error getting email template:",e),e}},Q=async e=>{try{let t=await (0,L.ET)(z,{...e,createdAt:(0,L.Bt)(),updatedAt:(0,L.Bt)()});return await R.Cv.logDataExport(e.createdBy,"","email_template",{action:"create",templateId:t.id,templateName:e.name}),t.id}catch(e){throw console.error("Error creating email template:",e),e}},V=async(e,t,n)=>{try{let a=(0,L.JU)(I.db,"email_templates",e);await (0,L.r7)(a,{...t,updatedAt:(0,L.Bt)()}),await R.Cv.logDataExport(n,"","email_template",{action:"update",templateId:e,updates:t})}catch(e){throw console.error("Error updating email template:",e),e}},Y=(e,t)=>{let n=e.subject,a=e.htmlContent,r=e.textContent;return Object.entries(t).forEach(e=>{let[t,i]=e,s=RegExp("{{".concat(t,"}}"),"g"),l=String(i||"");n=n.replace(s,l),a=a.replace(s,l),r=r.replace(s,l)}),{subject:n,htmlContent:a,textContent:r}},B=async(e,t,n,a,r,i,s)=>{try{let l=await _(e);if(!l)throw Error("Email template not found");let{subject:o,htmlContent:d,textContent:c}=Y(l,a),m={templateId:e,recipientEmail:t,recipientName:n,recipientId:a.recipientId,subject:o,htmlContent:d,textContent:c,variables:a,status:"pending",scheduledAt:s?L.EK.fromDate(s):void 0,metadata:{category:r.category,relatedResource:r.relatedResource,priority:r.priority||"normal"},createdBy:i,createdAt:(0,L.Bt)(),updatedAt:(0,L.Bt)()},p=await (0,L.ET)(O,m);return await (0,L.r7)(p,{status:"sent",sentAt:(0,L.Bt)(),updatedAt:(0,L.Bt)()}),await R.Cv.logDataExport(i,"","email_notification",{action:"send",notificationId:p.id,templateId:e,recipientEmail:t,category:r.category}),p.id}catch(e){throw console.error("Error sending email notification:",e),e}},H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,L.IO)(O);e.recipientId&&(t=(0,L.IO)(t,(0,L.ar)("recipientId","==",e.recipientId))),e.status&&(t=(0,L.IO)(t,(0,L.ar)("status","==",e.status))),e.category&&(t=(0,L.IO)(t,(0,L.ar)("metadata.category","==",e.category))),t=(0,L.IO)(t,(0,L.Xo)("createdAt","desc")),e.limit&&(t=(0,L.IO)(t,limit(e.limit)));let n=await (0,L.PL)(t),a=[];return n.forEach(e=>{a.push({id:e.id,...e.data()})}),a}catch(e){throw console.error("Error getting email notifications:",e),e}},F=async()=>{try{for(let e of U)await (0,L.ET)(z,{...e,isActive:!0,isSystem:!0,createdBy:"system",createdByName:"System",createdAt:(0,L.Bt)(),updatedAt:(0,L.Bt)()})}catch(e){throw console.error("Error initializing default templates:",e),e}};function G(){let{user:e}=(0,r.aC)(),[t,n]=(0,s.useState)([]),[i,L]=(0,s.useState)([]),[I,R]=(0,s.useState)(null),[z,O]=(0,s.useState)(!0),[U,F]=(0,s.useState)(!1),[G,J]=(0,s.useState)(""),[X,K]=(0,s.useState)(""),[$,ee]=(0,s.useState)("templates"),[et,en]=(0,s.useState)(!1),[ea,er]=(0,s.useState)(!1),[ei,es]=(0,s.useState)(!1),[el,eo]=(0,s.useState)({search:"",category:"",status:""}),[ed,ec]=(0,s.useState)({name:"",description:"",category:"general",subject:"",htmlContent:"",textContent:"",variables:[],isActive:!0}),[em,ep]=(0,s.useState)({recipientEmail:(null==e?void 0:e.email)||"",recipientName:(null==e?void 0:e.name)||"",testVariables:{}}),[eu,ey]=(0,s.useState)({});(0,s.useEffect)(()=>{ex()},[]);let ex=async()=>{O(!0);try{let[e,t]=await Promise.all([W(),H({limit:50})]);n(e),L(t)}catch(e){J(e.message)}finally{O(!1)}},eh=async()=>{if(e){F(!0),J("");try{await Q({...ed,isSystem:!1,createdBy:e.id,createdByName:e.name}),K("Email template created successfully!"),en(!1),ec({name:"",description:"",category:"general",subject:"",htmlContent:"",textContent:"",variables:[],isActive:!0}),await ex()}catch(e){J(e.message)}finally{F(!1)}}},eg=async()=>{if(e&&I){F(!0),J("");try{await V(I.id,ed,e.id),K("Email template updated successfully!"),await ex();let t=await _(I.id);R(t)}catch(e){J(e.message)}finally{F(!1)}}},eb=async()=>{if(e&&I)try{await B(I.id,em.recipientEmail,em.recipientName,em.testVariables,{category:"test",priority:"low"},e.id),K("Test email sent successfully!"),es(!1),await ex()}catch(e){J(e.message)}},ev=e=>{R(e);let t={};e.variables.forEach(e=>{t[e.name]=e.defaultValue||"[".concat(e.label,"]")}),ey(t),er(!0)},ef=e=>{R(e),ec({name:e.name,description:e.description,category:e.category,subject:e.subject,htmlContent:e.htmlContent,textContent:e.textContent,variables:e.variables,isActive:e.isActive}),en(!0)},ej=(e,t,n)=>{ec(a=>({...a,variables:a.variables.map((a,r)=>r===e?{...a,[t]:n}:a)}))},eN=e=>{ec(t=>({...t,variables:t.variables.filter((t,n)=>n!==e)}))},ew=e=>{let t={notification:g.Z,reminder:b.Z,welcome:v.Z,maintenance:f.Z,lease:j.Z,payment:N.Z,inspection:w.Z,general:C.Z}[e]||C.Z;return(0,a.jsx)(t,{className:"w-4 h-4"})},eC=e=>({notification:"bg-blue-100 text-blue-800",reminder:"bg-orange-100 text-orange-800",welcome:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",lease:"bg-purple-100 text-purple-800",payment:"bg-red-100 text-red-800",inspection:"bg-indigo-100 text-indigo-800",general:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800",eD=e=>({pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",bounced:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",ek=t.filter(e=>(!el.search||!!e.name.toLowerCase().includes(el.search.toLowerCase())||!!e.description.toLowerCase().includes(el.search.toLowerCase()))&&(!el.category||e.category===el.category)),eq=i.filter(e=>(!el.search||!!e.subject.toLowerCase().includes(el.search.toLowerCase())||!!e.recipientEmail.toLowerCase().includes(el.search.toLowerCase()))&&(!el.status||e.status===el.status));return z?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x.O,{className:"h-8 w-64"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,a.jsx)(x.O,{className:"h-32"},e))})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Email Templates & Communications"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage email templates and view communication history"})]}),(0,a.jsxs)(d.z,{onClick:()=>en(!0),children:[(0,a.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),"New Template"]})]}),G&&(0,a.jsxs)(y.bZ,{variant:"destructive",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),(0,a.jsx)(y.X,{children:G})]}),X&&(0,a.jsxs)(y.bZ,{children:[(0,a.jsx)(q.Z,{className:"h-4 w-4"}),(0,a.jsx)(y.X,{children:X})]}),(0,a.jsxs)(h.mQ,{value:$,onValueChange:ee,className:"w-full",children:[(0,a.jsxs)(h.dr,{className:"grid w-full grid-cols-2",children:[(0,a.jsxs)(h.SP,{value:"templates",children:["Email Templates (",t.length,")"]}),(0,a.jsxs)(h.SP,{value:"notifications",children:["Email History (",i.length,")"]})]}),(0,a.jsxs)(h.nU,{value:"templates",className:"space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center",children:[(0,a.jsx)(P.Z,{className:"mr-2 h-4 w-4"}),"Filters"]})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(c.I,{placeholder:"Search templates...",value:el.search,onChange:e=>eo(t=>({...t,search:e.target.value})),className:"pl-9"})]})}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)(u.Ph,{value:el.category,onValueChange:e=>eo(t=>({...t,category:e})),children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{placeholder:"All Categories"})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"",children:"All Categories"}),(0,a.jsx)(u.Ql,{value:"notification",children:"Notification"}),(0,a.jsx)(u.Ql,{value:"reminder",children:"Reminder"}),(0,a.jsx)(u.Ql,{value:"welcome",children:"Welcome"}),(0,a.jsx)(u.Ql,{value:"maintenance",children:"Maintenance"}),(0,a.jsx)(u.Ql,{value:"lease",children:"Lease"}),(0,a.jsx)(u.Ql,{value:"payment",children:"Payment"}),(0,a.jsx)(u.Ql,{value:"inspection",children:"Inspection"}),(0,a.jsx)(u.Ql,{value:"general",children:"General"})]})]})})]})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ek.map(e=>(0,a.jsxs)(l.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(l.ll,{className:"text-lg",children:e.name}),(0,a.jsx)(l.SZ,{children:e.description})]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(o.C,{className:eC(e.category),children:[ew(e.category),(0,a.jsx)("span",{className:"ml-1",children:e.category})]}),e.isSystem&&(0,a.jsx)(o.C,{variant:"outline",children:"System"})]})]})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("strong",{children:"Subject:"})," ",e.subject]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Variables: ",e.variables.length," | Created: ",(0,T.WU)(e.createdAt.toDate(),"MMM dd, yyyy")]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>ev(e),children:[(0,a.jsx)(E.Z,{className:"w-3 h-3 mr-1"}),"Preview"]}),!e.isSystem&&(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>ef(e),children:[(0,a.jsx)(S.Z,{className:"w-3 h-3 mr-1"}),"Edit"]})]}),(0,a.jsx)(o.C,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]})]})})]},e.id))}),0===ek.length&&(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"flex items-center justify-center h-32",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(C.Z,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No templates found"})]})})})]}),(0,a.jsxs)(h.nU,{value:"notifications",className:"space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center",children:[(0,a.jsx)(P.Z,{className:"mr-2 h-4 w-4"}),"Filters"]})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(c.I,{placeholder:"Search emails...",value:el.search,onChange:e=>eo(t=>({...t,search:e.target.value})),className:"pl-9"})]})}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)(u.Ph,{value:el.status,onValueChange:e=>eo(t=>({...t,status:e})),children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{placeholder:"All Statuses"})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"",children:"All Statuses"}),(0,a.jsx)(u.Ql,{value:"pending",children:"Pending"}),(0,a.jsx)(u.Ql,{value:"sent",children:"Sent"}),(0,a.jsx)(u.Ql,{value:"delivered",children:"Delivered"}),(0,a.jsx)(u.Ql,{value:"failed",children:"Failed"}),(0,a.jsx)(u.Ql,{value:"bounced",children:"Bounced"})]})]})})]})})]}),(0,a.jsx)("div",{className:"space-y-3",children:eq.map(e=>(0,a.jsx)(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.subject}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["To: ",e.recipientName," (",e.recipientEmail,")"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o.C,{className:eD(e.status),children:e.status.toUpperCase()}),(0,a.jsx)(o.C,{className:eC(e.metadata.category),children:e.metadata.category})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Sent:"})," ",(0,T.WU)(e.createdAt.toDate(),"MMM dd, yyyy HH:mm")]}),e.sentAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Delivered:"})," ",(0,T.WU)(e.sentAt.toDate(),"MMM dd, yyyy HH:mm")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Priority:"})," ",e.metadata.priority]})]}),e.errorMessage&&(0,a.jsxs)("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[(0,a.jsx)("strong",{children:"Error:"})," ",e.errorMessage]})]})},e.id))}),0===eq.length&&(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"flex items-center justify-center h-32",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(C.Z,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No email notifications found"})]})})})]})]}),et&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(l.Zb,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:I?"Edit Email Template":"Create New Email Template"})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Template Name"}),(0,a.jsx)(c.I,{value:ed.name,onChange:e=>ec(t=>({...t,name:e.target.value})),placeholder:"Enter template name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Category"}),(0,a.jsxs)(u.Ph,{value:ed.category,onValueChange:e=>ec(t=>({...t,category:e})),children:[(0,a.jsx)(u.i4,{children:(0,a.jsx)(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"notification",children:"Notification"}),(0,a.jsx)(u.Ql,{value:"reminder",children:"Reminder"}),(0,a.jsx)(u.Ql,{value:"welcome",children:"Welcome"}),(0,a.jsx)(u.Ql,{value:"maintenance",children:"Maintenance"}),(0,a.jsx)(u.Ql,{value:"lease",children:"Lease"}),(0,a.jsx)(u.Ql,{value:"payment",children:"Payment"}),(0,a.jsx)(u.Ql,{value:"inspection",children:"Inspection"}),(0,a.jsx)(u.Ql,{value:"general",children:"General"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Description"}),(0,a.jsx)(c.I,{value:ed.description,onChange:e=>ec(t=>({...t,description:e.target.value})),placeholder:"Brief description of this template"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Subject Line"}),(0,a.jsx)(c.I,{value:ed.subject,onChange:e=>ec(t=>({...t,subject:e.target.value})),placeholder:"Email subject (use {{variable}} for dynamic content)"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"HTML Content"}),(0,a.jsx)(p.g,{value:ed.htmlContent,onChange:e=>ec(t=>({...t,htmlContent:e.target.value})),placeholder:"HTML email content",rows:8})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Text Content"}),(0,a.jsx)(p.g,{value:ed.textContent,onChange:e=>ec(t=>({...t,textContent:e.target.value})),placeholder:"Plain text email content",rows:8})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(m._,{children:"Variables"}),(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>{ec(e=>({...e,variables:[...e.variables,{name:"",label:"",description:"",required:!0,defaultValue:""}]}))},children:[(0,a.jsx)(D.Z,{className:"w-3 h-3 mr-1"}),"Add Variable"]})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:ed.variables.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-end",children:[(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)(c.I,{placeholder:"Variable name",value:e.name,onChange:e=>ej(t,"name",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)(c.I,{placeholder:"Display label",value:e.label,onChange:e=>ej(t,"label",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-4",children:(0,a.jsx)(c.I,{placeholder:"Description",value:e.description,onChange:e=>ej(t,"description",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>ej(t,"required",e.target.checked)})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>eN(t),children:(0,a.jsx)(Z.Z,{className:"w-3 h-3"})})})]},t))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:ed.isActive,onChange:e=>ec(t=>({...t,isActive:e.target.checked}))}),(0,a.jsx)(m._,{htmlFor:"isActive",children:"Template is active"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(d.z,{variant:"outline",onClick:()=>en(!1),children:"Cancel"}),(0,a.jsx)(d.z,{onClick:I?eg:eh,disabled:U,children:U?"Saving...":I?"Update Template":"Create Template"})]})]})]})}),ea&&I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(l.Zb,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(l.ll,{children:["Preview: ",I.name]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>{R(I),es(!0)},children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Send Test"]}),(0,a.jsx)(d.z,{variant:"outline",onClick:()=>er(!1),children:"Close"})]})]})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.variables.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:e.label}),(0,a.jsx)(c.I,{placeholder:e.description,value:eu[e.name]||"",onChange:t=>ey(n=>({...n,[e.name]:t.target.value}))})]},e.name))}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{children:"Subject"}),(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded border",children:Y(I,eu).subject})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{children:"HTML Preview"}),(0,a.jsx)("div",{className:"p-4 bg-white border rounded max-h-96 overflow-y-auto",dangerouslySetInnerHTML:{__html:Y(I,eu).htmlContent}})]})]})]})]})}),ei&&I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(l.Zb,{className:"w-full max-w-md",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Send Test Email"})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Recipient Email"}),(0,a.jsx)(c.I,{type:"email",value:em.recipientEmail,onChange:e=>ep(t=>({...t,recipientEmail:e.target.value})),placeholder:"test@example.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Recipient Name"}),(0,a.jsx)(c.I,{value:em.recipientName,onChange:e=>ep(t=>({...t,recipientName:e.target.value})),placeholder:"Test User"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{children:"Test Variables (JSON format)"}),(0,a.jsx)(p.g,{value:JSON.stringify(em.testVariables,null,2),onChange:e=>{try{let t=JSON.parse(e.target.value);ep(e=>({...e,testVariables:t}))}catch(e){}},placeholder:'{"tenantName": "John Doe", "propertyName": "Test Property"}',rows:4})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(d.z,{variant:"outline",onClick:()=>es(!1),children:"Cancel"}),(0,a.jsxs)(d.z,{onClick:eb,children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Send Test"]})]})]})]})})]})}function J(){let{user:e,loading:t}=(0,r.aC)();return t?(0,a.jsx)("div",{children:"Loading..."}):(e||(0,i.redirect)("/login"),["admin","agent"].includes(e.role))?(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsx)(G,{})}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have permission to manage communications."})]})})}},12339:function(e,t,n){"use strict";n.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var a=n(57437),r=n(2265),i=n(20271),s=n(94508);let l=i.fC,o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...r})});o.displayName=i.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.xz,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...r})});d.displayName=i.xz.displayName;let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r})});c.displayName=i.VY.displayName},31047:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},41671:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},88226:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},48736:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},90740:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},14938:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},89345:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},11:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},99397:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},44743:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},15868:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},18930:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},95805:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},29525:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]])},6394:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var a=n(2265),r=n(66840),i=n(57437),s=a.forwardRef((e,t)=>(0,i.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var l=s}},function(e){e.O(0,[4358,139,92,5189,7746,3825,2093,4193,271,9984,6729,2971,2117,1744],function(){return e(e.s=94801)}),_N_E=e.O()}]);