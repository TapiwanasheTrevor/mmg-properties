(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{44639:function(e,a,s){Promise.resolve().then(s.bind(s,40293)),Promise.resolve().then(s.bind(s,18264))},18264:function(e,a,s){"use strict";s.d(a,{default:function(){return k}});var t=s(57437),l=s(2265),r=s(3612),i=s(62869),n=s(95186),c=s(26815),d=s(66070),o=s(16831),m=s(35974),u=s(65613),x=s(6512),h=s(49322),f=s(30401),p=s(53581),N=s(79205);let v=(0,N.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),j=(0,N.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var g=s(5978),y=s(43301),b=s(60062),w=s(17293);function k(){var e,a,s;let{user:N,firebaseUser:k}=(0,r.aC)(),[Z,_]=(0,l.useState)(!1),[C,S]=(0,l.useState)(""),[A,P]=(0,l.useState)(""),[F,M]=(0,l.useState)(null),[L,D]=(0,l.useState)(null),E=(0,l.useRef)(null),[R,z]=(0,l.useState)({firstName:(null==N?void 0:N.profile.firstName)||"",lastName:(null==N?void 0:N.profile.lastName)||"",email:(null==N?void 0:N.email)||"",phone:(null==N?void 0:N.phone)||"",bio:""}),I=(e,a)=>{z(s=>({...s,[e]:a}))},q=async e=>{if(!N||!k)throw Error("User not authenticated");let a=(0,b.iH)(w.tO,"avatars/".concat(N.id,"/").concat(e.name)),s=await (0,b.KV)(a,e);return await (0,b.Jt)(s.ref)},O=async e=>{if(e.preventDefault(),N&&k){_(!0),S(""),P("");try{let e=N.profile.avatar;F&&(e=await q(F));let a=(0,g.JU)(w.db,"users",N.id);await (0,g.r7)(a,{"profile.firstName":R.firstName,"profile.lastName":R.lastName,"profile.avatar":e,phone:R.phone,updatedAt:(0,g.Bt)()}),await (0,y.ck)(k,{displayName:"".concat(R.firstName," ").concat(R.lastName),photoURL:e}),P("Profile updated successfully!"),M(null),D(null),setTimeout(()=>{window.location.reload()},1500)}catch(e){S(e.message)}finally{_(!1)}}},V=e=>{switch(e){case"admin":return"Administrator";case"owner":return"Property Owner";case"agent":return"Agent";case"tenant":return"Tenant";default:return e}};return N?(0,t.jsx)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{className:"text-2xl",children:"Profile Settings"}),(0,t.jsx)(d.SZ,{children:"Manage your account information and preferences"})]}),(0,t.jsxs)(d.aY,{children:[C&&(0,t.jsxs)(u.bZ,{variant:"destructive",className:"mb-6",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),(0,t.jsx)(u.X,{children:C})]}),A&&(0,t.jsxs)(u.bZ,{className:"mb-6",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),(0,t.jsx)(u.X,{children:A})]}),(0,t.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(o.qE,{className:"h-24 w-24",children:[(0,t.jsx)(o.F$,{src:L||N.profile.avatar,alt:"Profile picture"}),(0,t.jsxs)(o.Q5,{className:"text-xl",children:[N.profile.firstName.charAt(0),N.profile.lastName.charAt(0)]})]}),(0,t.jsx)(i.z,{type:"button",size:"sm",className:"absolute -bottom-2 -right-2 rounded-full h-8 w-8 p-0",onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.click()},children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})}),(0,t.jsx)("input",{ref:E,type:"file",accept:"image/*",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){M(s);let e=new FileReader;e.onload=e=>{var a;D(null===(a=e.target)||void 0===a?void 0:a.result)},e.readAsDataURL(s)}},className:"hidden"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-medium",children:[N.profile.firstName," ",N.profile.lastName]}),(0,t.jsx)("p",{className:"text-gray-600",children:N.email}),(0,t.jsx)(m.C,{className:"mt-2 ".concat((e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"owner":return"bg-blue-100 text-blue-800";case"agent":return"bg-green-100 text-green-800";case"tenant":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(N.role)),children:V(N.role)})]})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Personal Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"firstName",children:"First Name"}),(0,t.jsx)(n.I,{id:"firstName",value:R.firstName,onChange:e=>I("firstName",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"lastName",children:"Last Name"}),(0,t.jsx)(n.I,{id:"lastName",value:R.lastName,onChange:e=>I("lastName",e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"email",children:"Email"}),(0,t.jsx)(n.I,{id:"email",type:"email",value:R.email,disabled:!0,className:"bg-gray-50"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Email cannot be changed from this page"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsx)(n.I,{id:"phone",type:"tel",value:R.phone,onChange:e=>I("phone",e.target.value),placeholder:"+263 77 123 4567"})]})]}),(0,t.jsx)(x.Z,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Account Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{className:"text-sm font-medium",children:"Role"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:V(N.role)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{className:"text-sm font-medium",children:"Member Since"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:(null===(s=N.createdAt)||void 0===s?void 0:null===(a=s.toDate)||void 0===a?void 0:null===(e=a.call(s))||void 0===e?void 0:e.toLocaleDateString())||"N/A"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{className:"text-sm font-medium",children:"Permissions"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:N.permissions.map(e=>(0,t.jsx)(m.C,{variant:"outline",className:"text-xs",children:e.replace("_"," ")},e))})]})]}),(0,t.jsx)("div",{className:"flex justify-end space-x-4",children:(0,t.jsx)(i.z,{type:"submit",disabled:Z,children:Z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})]})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading profile..."})]})})}},26815:function(e,a,s){"use strict";s.d(a,{_:function(){return d}});var t=s(57437),l=s(2265),r=s(6394),i=s(90535),n=s(94508);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.f,{ref:a,className:(0,n.cn)(c(),s),...l})});d.displayName=r.f.displayName},53581:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},49322:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6394:function(e,a,s){"use strict";s.d(a,{f:function(){return n}});var t=s(2265),l=s(66840),r=s(57437),i=t.forwardRef((e,a)=>(0,r.jsx)(l.WV.label,{...e,ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var n=i}},function(e){e.O(0,[4358,139,92,5189,7746,3825,2093,2972,3774,5266,9984,2982,3921,794,2971,2117,1744],function(){return e(e.s=44639)}),_N_E=e.O()}]);