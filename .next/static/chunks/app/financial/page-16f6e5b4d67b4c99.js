(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5518],{57482:function(e,t,s){Promise.resolve().then(s.bind(s,84381))},84381:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Q}});var a=s(57437),n=s(3612),r=s(99376),l=s(2265),i=s(27648),c=s(66070),d=s(35974),o=s(62869),u=s(12339),m=s(53647),x=s(65613),h=s(93022),f=s(48736),p=s(99397),j=s(49322),y=s(70525),g=s(3085),v=s(95252),N=s(46221),b=s(42208),w=s(41671),Z=s(91723),I=s(48664),M=s(99649);function k(e){let t=(0,M.Q)(e);return t.setDate(1),t.setHours(0,0,0,0),t}var S=s(27742),C=s(63497);function O(e,t){return function(e,t){let s=(0,M.Q)(e);if(isNaN(t))return(0,C.L)(e,NaN);if(!t)return s;let a=s.getDate(),n=(0,C.L)(e,s.getTime());return(n.setMonth(s.getMonth()+t+1,0),a>=n.getDate())?n:(s.setFullYear(n.getFullYear(),n.getMonth(),a),s)}(e,-t)}var _=s(52093),z=s(5978),P=s(17293);let T=(0,z.hJ)(P.db,"transactions"),E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,z.IO)(T);e.type&&(t=(0,z.IO)(t,(0,z.ar)("type","==",e.type))),e.status&&(t=(0,z.IO)(t,(0,z.ar)("status","==",e.status))),e.tenantId&&(t=(0,z.IO)(t,(0,z.ar)("tenantId","==",e.tenantId))),e.propertyId&&(t=(0,z.IO)(t,(0,z.ar)("propertyId","==",e.propertyId))),e.unitId&&(t=(0,z.IO)(t,(0,z.ar)("unitId","==",e.unitId))),e.leaseId&&(t=(0,z.IO)(t,(0,z.ar)("leaseId","==",e.leaseId))),e.paymentMethod&&(t=(0,z.IO)(t,(0,z.ar)("paymentMethod","==",e.paymentMethod))),t=(0,z.IO)(t,(0,z.Xo)("createdAt","desc")),e.pageSize&&(t=(0,z.IO)(t,(0,z.b9)(e.pageSize))),e.lastDoc&&(t=(0,z.IO)(t,(0,z.TQ)(e.lastDoc)));let s=await (0,z.PL)(t),a=[];s.forEach(e=>{a.push({id:e.id,...e.data()})});let n=a;return e.dateFrom&&(n=n.filter(t=>t.createdAt.toDate()>=e.dateFrom)),e.dateTo&&(n=n.filter(t=>t.createdAt.toDate()<=e.dateTo)),{transactions:n,lastDoc:s.docs[s.docs.length-1],hasMore:s.docs.length===(e.pageSize||0)}}catch(e){throw console.error("Error getting transactions:",e),e}},D=async()=>(await E({status:"pending"})).transactions,Y=async(e,t,s)=>{try{let a={status:"completed",pageSize:1e3};e&&(a.propertyId=e),t&&(a.dateFrom=t),s&&(a.dateTo=s);let n=(await E(a)).transactions,r={totalIncome:0,totalExpenses:0,netIncome:0,rentPayments:0,deposits:0,maintenanceCosts:0,serviceFees:0,transactionCount:n.length,ownerShare:0,mmgShare:0,byMonth:{},byCategory:{}};return n.forEach(e=>{let t=e.amount,s=F(e.createdAt.toDate(),"yyyy-MM");switch(r.byMonth[s]||(r.byMonth[s]={income:0,expenses:0,net:0,transactions:0}),t>0?(r.totalIncome+=t,r.byMonth[s].income+=t):(r.totalExpenses+=Math.abs(t),r.byMonth[s].expenses+=Math.abs(t)),r.byMonth[s].net+=t,r.byMonth[s].transactions+=1,r.byCategory[e.type]=(r.byCategory[e.type]||0)+t,e.type){case"rent_payment":r.rentPayments+=t;break;case"deposit":r.deposits+=t;break;case"maintenance_cost":r.maintenanceCosts+=Math.abs(t);break;case"service_fee":r.serviceFees+=Math.abs(t)}r.ownerShare+=e.allocatedTo.owner,r.mmgShare+=e.allocatedTo.mmg,e.allocatedTo.agent&&(r.mmgShare+=e.allocatedTo.agent)}),r.netIncome=r.totalIncome-r.totalExpenses,r}catch(e){throw console.error("Error calculating financial summary:",e),e}},A=async()=>{try{return[]}catch(e){throw console.error("Error getting overdue rent payments:",e),e}},F=(e,t)=>{let s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return"yyyy-MM"===t?"".concat(s,"-").concat(a):e.toISOString()};var R=s(48984);function V(){let{user:e}=(0,n.aC)(),[t,s]=(0,l.useState)([]),[r,M]=(0,l.useState)(null),[C,z]=(0,l.useState)([]),[P,T]=(0,l.useState)("all"),[F,V]=(0,l.useState)("current_month"),[Q,U]=(0,l.useState)([]),[H,L]=(0,l.useState)([]),[B,J]=(0,l.useState)(!0),[q,X]=(0,l.useState)("");(0,l.useEffect)(()=>{$()},[e,P,F]);let $=async()=>{if(e){J(!0),X("");try{let{dateFrom:e,dateTo:t}=W(F),[a,n,r,l,i]=await Promise.all([E({propertyId:"all"===P?void 0:P,dateFrom:e,dateTo:t,pageSize:50}),(0,R.vw)(),Y("all"===P?void 0:P,e,t),D(),A()]);s(a.transactions),z(n.properties),M(r),U(l),L(i)}catch(e){X(e.message)}finally{J(!1)}}},W=e=>{let t=new Date;switch(e){case"current_month":default:return{dateFrom:k(t),dateTo:(0,S.V)(t)};case"last_month":let s=O(t,1);return{dateFrom:k(s),dateTo:(0,S.V)(s)};case"last_3_months":return{dateFrom:O(t,3),dateTo:t};case"last_6_months":return{dateFrom:O(t,6),dateTo:t};case"current_year":return{dateFrom:new Date(t.getFullYear(),0,1),dateTo:t}}},G=e=>({rent_payment:"bg-green-100 text-green-800",deposit:"bg-blue-100 text-blue-800",refund:"bg-yellow-100 text-yellow-800",maintenance_cost:"bg-red-100 text-red-800",service_fee:"bg-purple-100 text-purple-800"})[e]||"bg-gray-100 text-gray-800",K=e=>({pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800",ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return"".concat("USD"===t?"$":"Z$").concat(Math.abs(e).toLocaleString())};return B&&!r?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.O,{className:"h-8 w-48"}),(0,a.jsx)(h.O,{className:"h-4 w-64 mt-2"})]}),(0,a.jsx)(h.O,{className:"h-10 w-32"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.aY,{className:"pt-6",children:[(0,a.jsx)(h.O,{className:"h-8 w-16 mb-2"}),(0,a.jsx)(h.O,{className:"h-4 w-24"})]})},e))}),(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"pt-6",children:(0,a.jsx)(h.O,{className:"h-64 w-full"})})})]}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track income, expenses, and financial performance"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o.z,{variant:"outline",asChild:!0,children:(0,a.jsxs)(i.default,{href:"/financial/reports",children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Reports"]})}),(0,a.jsx)(o.z,{asChild:!0,children:(0,a.jsxs)(i.default,{href:"/financial/new",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Record Payment"]})})]})]}),q&&(0,a.jsxs)(x.bZ,{variant:"destructive",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)(x.X,{children:q})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)(m.Ph,{value:P,onValueChange:T,children:[(0,a.jsx)(m.i4,{className:"w-[200px]",children:(0,a.jsx)(m.ki,{placeholder:"Select property"})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"all",children:"All Properties"}),C.map(e=>(0,a.jsx)(m.Ql,{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)(m.Ph,{value:F,onValueChange:V,children:[(0,a.jsx)(m.i4,{className:"w-[200px]",children:(0,a.jsx)(m.ki,{placeholder:"Select period"})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"current_month",children:"Current Month"}),(0,a.jsx)(m.Ql,{value:"last_month",children:"Last Month"}),(0,a.jsx)(m.Ql,{value:"last_3_months",children:"Last 3 Months"}),(0,a.jsx)(m.Ql,{value:"last_6_months",children:"Last 6 Months"}),(0,a.jsx)(m.Ql,{value:"current_year",children:"Current Year"})]})]})]}),r&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Income"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:ee(r.totalIncome)})]})]})})}),(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-red-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Expenses"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:ee(r.totalExpenses)})]})]})})}),(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Net Income"}),(0,a.jsx)("p",{className:"text-2xl font-bold ".concat(r.netIncome>=0?"text-green-600":"text-red-600"),children:ee(r.netIncome)})]})]})})}),(0,a.jsx)(c.Zb,{children:(0,a.jsx)(c.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Transactions"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:r.transactionCount})]})]})})})]}),(0,a.jsxs)(u.mQ,{defaultValue:"overview",className:"space-y-4",children:[(0,a.jsxs)(u.dr,{children:[(0,a.jsx)(u.SP,{value:"overview",children:"Overview"}),(0,a.jsxs)(u.SP,{value:"transactions",children:["Transactions (",t.length,")"]}),(0,a.jsxs)(u.SP,{value:"pending",children:["Pending (",Q.length,")"]}),(0,a.jsx)(u.SP,{value:"analytics",children:"Analytics"})]}),(0,a.jsx)(u.nU,{value:"overview",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Income Breakdown"}),(0,a.jsx)(c.SZ,{children:"Revenue by type"})]}),(0,a.jsx)(c.aY,{children:r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Rent Payments"}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:ee(r.rentPayments)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Deposits"}),(0,a.jsx)("span",{className:"font-bold text-blue-600",children:ee(r.deposits)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(r.totalIncome>0?r.rentPayments/r.totalIncome*100:0,"%")}})})]})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Expense Breakdown"}),(0,a.jsx)(c.SZ,{children:"Costs by category"})]}),(0,a.jsx)(c.aY,{children:r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Maintenance"}),(0,a.jsx)("span",{className:"font-bold text-red-600",children:ee(r.maintenanceCosts)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Service Fees"}),(0,a.jsx)("span",{className:"font-bold text-orange-600",children:ee(r.serviceFees)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-red-600 h-2 rounded-full",style:{width:"".concat(r.totalExpenses>0?r.maintenanceCosts/r.totalExpenses*100:0,"%")}})})]})})]})]})}),(0,a.jsx)(u.nU,{value:"transactions",children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Recent Transactions"}),(0,a.jsx)(c.SZ,{children:"Latest financial transactions"})]}),(0,a.jsx)(c.aY,{children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(v.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No transactions found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"No transactions match your current filters."}),(0,a.jsx)(o.z,{asChild:!0,children:(0,a.jsxs)(i.default,{href:"/financial/new",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Record Payment"]})})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(d.C,{className:G(e.type),children:e.type.replace("_"," ")}),(0,a.jsx)(d.C,{className:K(e.status),children:e.status})]}),(0,a.jsx)("h4",{className:"font-medium mb-1",children:ee(e.amount,e.currency)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground space-x-4",children:[(0,a.jsx)("span",{children:(0,_.WU)(e.createdAt.toDate(),"MMM dd, yyyy HH:mm")}),(0,a.jsxs)("span",{children:["Ref: ",e.reference]}),(0,a.jsx)("span",{className:"capitalize",children:e.paymentMethod.replace("_"," ")})]})]}),(0,a.jsx)(o.z,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(i.default,{href:"/financial/transactions/".concat(e.id),children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"View"]})})]})},e.id))})})]})}),(0,a.jsx)(u.nU,{value:"pending",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Pending Transactions"}),(0,a.jsx)(c.SZ,{children:"Transactions awaiting processing"})]}),(0,a.jsx)(c.aY,{children:0===Q.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(w.Z,{className:"mx-auto h-12 w-12 text-green-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No pending transactions"}),(0,a.jsx)("p",{className:"text-gray-600",children:"All transactions are up to date."})]}):(0,a.jsx)("div",{className:"space-y-4",children:Q.map(e=>(0,a.jsx)("div",{className:"border border-yellow-200 rounded-lg p-4 bg-yellow-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsxs)(d.C,{className:"bg-yellow-100 text-yellow-800",children:[(0,a.jsx)(Z.Z,{className:"w-3 h-3 mr-1"}),"Pending"]}),(0,a.jsx)(d.C,{className:G(e.type),children:e.type.replace("_"," ")})]}),(0,a.jsx)("h4",{className:"font-medium mb-1",children:ee(e.amount,e.currency)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Created ",(0,_.WU)(e.createdAt.toDate(),"MMM dd, yyyy HH:mm")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.z,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(i.default,{href:"/financial/transactions/".concat(e.id),children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"View"]})}),(0,a.jsx)(o.z,{size:"sm",children:"Process"})]})]})},e.id))})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Overdue Rent Payments"}),(0,a.jsx)(c.SZ,{children:"Rent payments that are past due"})]}),(0,a.jsx)(c.aY,{children:0===H.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(w.Z,{className:"mx-auto h-12 w-12 text-green-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No overdue payments"}),(0,a.jsx)("p",{className:"text-gray-600",children:"All rent payments are current."})]}):(0,a.jsx)("div",{className:"space-y-4",children:H.map((e,t)=>(0,a.jsx)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,a.jsxs)(d.C,{className:"bg-red-100 text-red-800",children:[e.daysOverdue," days overdue"]})}),(0,a.jsxs)("h4",{className:"font-medium mb-1",children:["Tenant: ",e.tenant]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Amount Due: ",ee(e.amountDue)]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Unit: ",e.unit," • Property: ",e.property]})]}),(0,a.jsx)(o.z,{variant:"outline",size:"sm",children:"Send Reminder"})]})},t))})})]})]})}),(0,a.jsx)(u.nU,{value:"analytics",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Monthly Trend"}),(0,a.jsx)(c.SZ,{children:"Income vs expenses over time"})]}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(N.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,a.jsx)("p",{children:"Chart visualization would go here"}),(0,a.jsx)("p",{className:"text-sm",children:"Integration with charting library needed"})]})})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Category Distribution"}),(0,a.jsx)(c.SZ,{children:"Transaction breakdown by type"})]}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(I.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,a.jsx)("p",{children:"Pie chart visualization would go here"}),(0,a.jsx)("p",{className:"text-sm",children:"Integration with charting library needed"})]})})})]})]})})]})]})}function Q(){let{user:e,loading:t}=(0,n.aC)();return t?(0,a.jsx)("div",{children:"Loading..."}):(e||(0,r.redirect)("/login"),["admin","owner","agent"].includes(e.role))?(0,a.jsx)(V,{}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have permission to view financial information."})]})})}},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var a=s(57437);s(2265);var n=s(90535),r=s(94508);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)(l({variant:s}),t),...n})}},53647:function(e,t,s){"use strict";s.d(t,{Bw:function(){return f},Ph:function(){return o},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var a=s(57437),n=s(2265),r=s(5013),l=s(40875),i=s(22135),c=s(30401),d=s(94508);let o=r.fC;r.ZA;let u=r.B4,m=n.forwardRef((e,t)=>{let{className:s,children:n,...i}=e;return(0,a.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[n,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});h.displayName=r.$G.displayName;let f=n.forwardRef((e,t)=>{let{className:s,children:n,position:l="popper",...i}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,a.jsx)(x,{}),(0,a.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(h,{})]})})});f.displayName=r.VY.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=r.__.displayName;let p=n.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,a.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:n})]})});p.displayName=r.ck.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=r.Z0.displayName},93022:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var a=s(57437),n=s(94508);function r(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...s})}},12339:function(e,t,s){"use strict";s.d(t,{SP:function(){return d},dr:function(){return c},mQ:function(){return i},nU:function(){return o}});var a=s(57437),n=s(2265),r=s(20271),l=s(94508);let i=r.fC,c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...n})});c.displayName=r.aV.displayName;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...n})});d.displayName=r.xz.displayName;let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});o.displayName=r.VY.displayName},3612:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return d},aC:function(){return o}});var a=s(57437),n=s(2265),r=s(5978),l=s(16023),i=s(17293);let c=(0,n.createContext)(void 0);function d(e){let{children:t}=e,[s,d]=(0,n.useState)(null),[o,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(!0),h=async()=>{if(o)try{let e=await (0,l.Ts)();d(e)}catch(e){console.error("Error fetching user data:",e)}},f=async()=>{try{await (0,l.Mx)(),d(null),u(null)}catch(e){throw console.error("Error signing out:",e),e}};return(0,n.useEffect)(()=>{if(!(0,i.Wn)()){x(!1);return}let e=(0,l.yv)(async e=>{if(u(e),e){let t=(0,r.JU)(i.db,"users",e.uid),s=(0,r.cf)(t,t=>{t.exists()?d({...t.data(),id:e.uid}):d(null),x(!1)},e=>{console.error("Error listening to user document:",e),d(null),x(!1)});return()=>s()}d(null),x(!1)});return()=>e()},[]),(0,a.jsx)(c.Provider,{value:{user:s,firebaseUser:o,loading:m,signOut:f,refreshUser:h},children:t})}function o(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},48984:function(e,t,s){"use strict";s.d(t,{E2:function(){return l},lK:function(){return c},vw:function(){return i},zI:function(){return d}});var a=s(5978);s(60062);var n=s(17293);let r=(0,a.hJ)(n.db,"properties"),l=async e=>{try{let t=(0,a.JU)(n.db,"properties",e);await (0,a.oe)(t)}catch(e){throw console.error("Error deleting property:",e),e}},i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,a.IO)(r);e.ownerId&&(t=(0,a.IO)(t,(0,a.ar)("ownerId","==",e.ownerId))),e.assignedAgentId&&(t=(0,a.IO)(t,(0,a.ar)("assignedAgents","array-contains",e.assignedAgentId))),e.type&&(t=(0,a.IO)(t,(0,a.ar)("type","==",e.type))),e.status&&(t=(0,a.IO)(t,(0,a.ar)("status","==",e.status))),t=(0,a.IO)(t,(0,a.Xo)("createdAt","desc")),e.pageSize&&(t=(0,a.IO)(t,(0,a.b9)(e.pageSize))),e.lastDoc&&(t=(0,a.IO)(t,(0,a.TQ)(e.lastDoc)));let s=await (0,a.PL)(t),n=[];return s.forEach(e=>{n.push({id:e.id,...e.data()})}),{properties:n,lastDoc:s.docs[s.docs.length-1],hasMore:s.docs.length===(e.pageSize||0)}}catch(e){throw console.error("Error getting properties:",e),e}},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let s=(0,a.IO)(r,(0,a.ar)("name",">=",e),(0,a.ar)("name","<=",e+""),(0,a.Xo)("name"),t(t)),n=await (0,a.PL)(s),l=[];return n.forEach(e=>{l.push({id:e.id,...e.data()})}),l}catch(e){throw console.error("Error searching properties:",e),e}},d=async(e,t,s)=>{try{let r=(0,a.JU)(n.db,"properties",e);await (0,a.r7)(r,{totalUnits:t,occupiedUnits:s,updatedAt:(0,a.Bt)()})}catch(e){throw console.error("Error updating property occupancy:",e),e}}},46221:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},95252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},48736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},48664:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3085:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},70525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},27648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(72972),n=s.n(a)},27742:function(e,t,s){"use strict";s.d(t,{V:function(){return n}});var a=s(99649);function n(e){let t=(0,a.Q)(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}}},function(e){e.O(0,[4358,139,92,5189,7746,3825,2093,4193,2972,271,9984,2971,2117,1744],function(){return e(e.s=57482)}),_N_E=e.O()}]);