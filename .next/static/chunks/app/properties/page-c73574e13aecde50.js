(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{26389:function(e,s,a){Promise.resolve().then(a.bind(a,40293)),Promise.resolve().then(a.bind(a,14957))},14957:function(e,s,a){"use strict";a.d(s,{default:function(){return O}});var l=a(57437),t=a(2265),r=a(27648),i=a(3612),n=a(66070),c=a(35974),d=a(62869),o=a(95186),m=a(53647),h=a(65613),x=a(93022),u=a(99397),p=a(49322),f=a(73247),j=a(98420);let N=(0,a(79205).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var y=a(67782),w=a(42208),g=a(15868),v=a(18930),b=a(95805),k=a(95252),Z=a(84190),C=a(48984);function O(e){let{onPropertySelect:s}=e,{user:a}=(0,i.aC)(),[O,M]=(0,t.useState)([]),[_,z]=(0,t.useState)(!0),[S,A]=(0,t.useState)(""),[P,Q]=(0,t.useState)(""),[U,V]=(0,t.useState)("all"),[E,R]=(0,t.useState)("all");(0,t.useEffect)(()=>{Y()},[a,U,E]);let Y=async()=>{if(a){z(!0),A("");try{let e={};"owner"===a.role?e.ownerId=a.id:"agent"===a.role&&(e.assignedAgentId=a.id),"all"!==U&&(e.type=U),"all"!==E&&(e.status=E);let s=await (0,C.vw)(e);M(s.properties)}catch(e){A(e.message)}finally{z(!1)}}},I=async()=>{if(!P.trim()){Y();return}z(!0);try{let e=await (0,C.lK)(P);M(e)}catch(e){A(e.message)}finally{z(!1)}},T=async e=>{if(confirm("Are you sure you want to delete this property? This action cannot be undone."))try{await (0,C.E2)(e),M(s=>s.filter(s=>s.id!==e))}catch(e){A(e.message)}},B=e=>({active:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",inactive:"bg-gray-100 text-gray-800"})[e],H=e=>({house:"Single House",apartment_complex:"Apartment Complex",commercial:"Commercial",mixed_use:"Mixed Use"})[e],q=e=>0===e.totalUnits?0:Math.round(e.occupiedUnits/e.totalUnits*100);return _&&0===O.length?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(x.O,{className:"h-8 w-48"}),(0,l.jsx)(x.O,{className:"h-4 w-64 mt-2"})]}),(0,l.jsx)(x.O,{className:"h-10 w-32"})]}),(0,l.jsx)(n.Zb,{children:(0,l.jsx)(n.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(x.O,{className:"h-10 flex-1"}),(0,l.jsx)(x.O,{className:"h-10 w-32"}),(0,l.jsx)(x.O,{className:"h-10 w-32"}),(0,l.jsx)(x.O,{className:"h-10 w-32"})]})})}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,l.jsxs)(n.Zb,{children:[(0,l.jsxs)(n.Ol,{children:[(0,l.jsx)(x.O,{className:"h-6 w-3/4"}),(0,l.jsx)(x.O,{className:"h-4 w-1/2"})]}),(0,l.jsx)(n.aY,{children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(x.O,{className:"h-4 w-full"}),(0,l.jsx)(x.O,{className:"h-4 w-full"}),(0,l.jsx)(x.O,{className:"h-4 w-full"}),(0,l.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,l.jsx)(x.O,{className:"h-8 w-16"}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(x.O,{className:"h-8 w-8"}),(0,l.jsx)(x.O,{className:"h-8 w-8"})]})]})]})})]},e))})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Properties"}),(0,l.jsxs)("p",{className:"text-muted-foreground",children:["Manage your property portfolio (",O.length," properties)"]})]}),((null==a?void 0:a.role)==="admin"||(null==a?void 0:a.role)==="owner")&&(0,l.jsx)(d.z,{asChild:!0,children:(0,l.jsxs)(r.default,{href:"/properties/new",children:[(0,l.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Add Property"]})})]}),S&&(0,l.jsxs)(h.bZ,{variant:"destructive",children:[(0,l.jsx)(p.Z,{className:"h-4 w-4"}),(0,l.jsx)(h.X,{children:S})]}),(0,l.jsx)(n.Zb,{children:(0,l.jsx)(n.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(f.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(o.I,{placeholder:"Search properties by name...",className:"pl-8",value:P,onChange:e=>Q(e.target.value),onKeyDown:e=>"Enter"===e.key&&I()})]})}),(0,l.jsxs)(m.Ph,{value:U,onValueChange:e=>V(e),children:[(0,l.jsx)(m.i4,{className:"w-[180px]",children:(0,l.jsx)(m.ki,{placeholder:"Property Type"})}),(0,l.jsxs)(m.Bw,{children:[(0,l.jsx)(m.Ql,{value:"all",children:"All Types"}),(0,l.jsx)(m.Ql,{value:"house",children:"Single House"}),(0,l.jsx)(m.Ql,{value:"apartment_complex",children:"Apartment Complex"}),(0,l.jsx)(m.Ql,{value:"commercial",children:"Commercial"}),(0,l.jsx)(m.Ql,{value:"mixed_use",children:"Mixed Use"})]})]}),(0,l.jsxs)(m.Ph,{value:E,onValueChange:e=>R(e),children:[(0,l.jsx)(m.i4,{className:"w-[180px]",children:(0,l.jsx)(m.ki,{placeholder:"Status"})}),(0,l.jsxs)(m.Bw,{children:[(0,l.jsx)(m.Ql,{value:"all",children:"All Status"}),(0,l.jsx)(m.Ql,{value:"active",children:"Active"}),(0,l.jsx)(m.Ql,{value:"maintenance",children:"Maintenance"}),(0,l.jsx)(m.Ql,{value:"inactive",children:"Inactive"})]})]}),(0,l.jsxs)(d.z,{onClick:I,children:[(0,l.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Search"]})]})})}),0!==O.length||_?(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(e=>(0,l.jsxs)(n.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,l.jsx)(n.Ol,{children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)(n.ll,{className:"text-lg truncate",children:e.name}),(0,l.jsxs)(n.SZ,{className:"flex items-center mt-1",children:[(0,l.jsx)(N,{className:"w-3 h-3 mr-1 flex-shrink-0"}),(0,l.jsxs)("span",{className:"truncate",children:[e.address.suburb,", ",e.address.city]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 ml-2",children:[(0,l.jsx)(c.C,{className:B(e.status),children:e.status}),(0,l.jsxs)(Z.h_,{children:[(0,l.jsx)(Z.$F,{asChild:!0,children:(0,l.jsx)(d.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})})}),(0,l.jsxs)(Z.AW,{align:"end",children:[(0,l.jsx)(Z.Xi,{asChild:!0,children:(0,l.jsxs)(r.default,{href:"/properties/".concat(e.id),children:[(0,l.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"View Details"]})}),((null==a?void 0:a.role)==="admin"||(null==a?void 0:a.role)==="owner")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.Xi,{asChild:!0,children:(0,l.jsxs)(r.default,{href:"/properties/".concat(e.id,"/edit"),children:[(0,l.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Edit"]})}),(0,l.jsxs)(Z.Xi,{onClick:()=>T(e.id),className:"text-red-600",children:[(0,l.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]})]})}),(0,l.jsx)(n.aY,{children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,l.jsx)("span",{className:"font-medium",children:H(e.type)})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsxs)("span",{className:"text-muted-foreground flex items-center",children:[(0,l.jsx)(b.Z,{className:"w-3 h-3 mr-1"}),"Occupancy:"]}),(0,l.jsxs)("span",{className:"font-medium",children:[e.occupiedUnits,"/",e.totalUnits," units",(0,l.jsxs)("span",{className:"text-muted-foreground ml-1",children:["(",q(e),"%)"]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsxs)("span",{className:"text-muted-foreground flex items-center",children:[(0,l.jsx)(k.Z,{className:"w-3 h-3 mr-1"}),"Monthly Income:"]}),(0,l.jsxs)("span",{className:"font-medium text-green-600",children:["$",e.monthlyIncome.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex justify-between pt-3 border-t",children:[(0,l.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>null==s?void 0:s(e.id),children:[(0,l.jsx)(w.Z,{className:"w-3 h-3 mr-1"}),"View"]}),(0,l.jsx)("div",{className:"space-x-2",children:(0,l.jsx)(d.z,{variant:"outline",size:"sm",asChild:!0,children:(0,l.jsxs)(r.default,{href:"/properties/".concat(e.id,"/units"),children:[(0,l.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"Units"]})})})]})]})})]},e.id))}):(0,l.jsx)(n.Zb,{children:(0,l.jsxs)(n.aY,{className:"pt-6 text-center",children:[(0,l.jsx)(j.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No properties found"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:P?"No properties match your search criteria.":"Get started by adding your first property."}),((null==a?void 0:a.role)==="admin"||(null==a?void 0:a.role)==="owner")&&!P&&(0,l.jsx)(d.z,{asChild:!0,children:(0,l.jsxs)(r.default,{href:"/properties/new",children:[(0,l.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Add Property"]})})]})}),_&&O.length>0&&(0,l.jsx)("div",{className:"text-center py-4",children:(0,l.jsxs)("div",{className:"inline-flex items-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Loading more properties..."]})})]})}},53647:function(e,s,a){"use strict";a.d(s,{Bw:function(){return p},Ph:function(){return o},Ql:function(){return f},i4:function(){return h},ki:function(){return m}});var l=a(57437),t=a(2265),r=a(5013),i=a(40875),n=a(22135),c=a(30401),d=a(94508);let o=r.fC;r.ZA;let m=r.B4,h=t.forwardRef((e,s)=>{let{className:a,children:t,...n}=e;return(0,l.jsxs)(r.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[t,(0,l.jsx)(r.JO,{asChild:!0,children:(0,l.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=r.xz.displayName;let x=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(r.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(r.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,l.jsx)(i.Z,{className:"h-4 w-4"})})});u.displayName=r.$G.displayName;let p=t.forwardRef((e,s)=>{let{className:a,children:t,position:i="popper",...n}=e;return(0,l.jsx)(r.h_,{children:(0,l.jsxs)(r.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,l.jsx)(x,{}),(0,l.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,l.jsx)(u,{})]})})});p.displayName=r.VY.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(r.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=r.__.displayName;let f=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,l.jsxs)(r.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.wU,{children:(0,l.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(r.eT,{children:t})]})});f.displayName=r.ck.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(r.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=r.Z0.displayName},98420:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});let l=(0,a(79205).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},67782:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});let l=(0,a(79205).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},15868:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});let l=(0,a(79205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},18930:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});let l=(0,a(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[4358,139,92,5189,7746,3825,2093,4193,2972,3774,5266,9984,2982,3921,794,2971,2117,1744],function(){return e(e.s=26389)}),_N_E=e.O()}]);