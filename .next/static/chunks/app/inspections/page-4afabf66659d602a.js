(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5807],{60673:function(e,s,t){Promise.resolve().then(t.bind(t,25321))},25321:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return K}});var n=t(57437),a=t(2265),i=t(3612),l=t(99376),r=t(66070),c=t(35974),o=t(62869),d=t(95186),p=t(53647),h=t(65613),m=t(93022),x=t(31047),u=t(91723),g=t(41671),j=t(49322),v=t(48736),y=t(99397),f=t(76865),w=t(70525),N=t(90740),b=t(73247),C=t(92369),I=t(60044),k=t(42208),D=t(52093),_=t(5978),Z=t(60062),S=t(17293),U=t(51149);let Q=(0,_.hJ)(S.db,"inspections"),P=[{name:"Kitchen",items:["Cabinets and drawers","Countertops","Sink and faucet","Appliances (stove, refrigerator, dishwasher)","Electrical outlets","Lighting","Flooring","Windows","Plumbing"]},{name:"Living Room",items:["Walls and paint","Flooring/carpet","Windows and screens","Doors","Electrical outlets","Lighting fixtures","HVAC vents","Ceiling"]},{name:"Bedrooms",items:["Walls and paint","Flooring/carpet","Windows and screens","Closets","Doors","Electrical outlets","Lighting fixtures","HVAC vents"]},{name:"Bathrooms",items:["Toilet","Sink and faucet","Shower/bathtub","Tiles and grout","Mirrors","Lighting","Exhaust fan","Plumbing","Electrical outlets"]},{name:"Exterior",items:["Roof condition","Gutters and downspouts","Siding/exterior walls","Windows and screens","Doors","Walkways and steps","Landscaping","Fencing","Parking areas"]},{name:"Systems",items:["HVAC system","Electrical panel","Plumbing system","Water heater","Smoke detectors","Carbon monoxide detectors","Security system","Internet/cable setup"]}],T=async(e,s,t)=>{try{let n=P.map((e,s)=>({id:"area_".concat(s),name:e.name,condition:"good",notes:"",photos:[],items:e.items.map((e,t)=>({id:"item_".concat(s,"_").concat(t),name:e,condition:"good",notes:"",requiresAttention:!1,photos:[]}))})),a={...e,areas:n,photos:[],issues:[],reportGenerated:!1,createdBy:s,createdByName:t,createdAt:(0,_.Bt)(),updatedAt:(0,_.Bt)()},i=await (0,_.ET)(Q,a);return await U.Cv.logDataExport(s,"","inspection",{action:"create",inspectionId:i.id,propertyId:e.propertyId,inspectionType:e.inspectionType}),i.id}catch(e){throw console.error("Error creating inspection report:",e),e}},E=async e=>{try{let s=(0,_.JU)(S.db,"inspections",e),t=await (0,_.QT)(s);if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("Error getting inspection report:",e),e}},A=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let s=(0,_.IO)(Q);e.propertyId&&(s=(0,_.IO)(s,(0,_.ar)("propertyId","==",e.propertyId))),e.unitId&&(s=(0,_.IO)(s,(0,_.ar)("unitId","==",e.unitId))),e.inspectionType&&(s=(0,_.IO)(s,(0,_.ar)("inspectionType","==",e.inspectionType))),e.status&&(s=(0,_.IO)(s,(0,_.ar)("status","==",e.status))),e.inspectorId&&(s=(0,_.IO)(s,(0,_.ar)("inspector.id","==",e.inspectorId))),s=(0,_.IO)(s,(0,_.Xo)("scheduledDate","desc")),e.pageSize&&(s=(0,_.IO)(s,(0,_.b9)(e.pageSize)));let t=await (0,_.PL)(s),n=[];return t.forEach(s=>{let t={id:s.id,...s.data()};if(e.dateFrom||e.dateTo){let s=t.scheduledDate.toDate();if(e.dateFrom&&s<e.dateFrom||e.dateTo&&s>e.dateTo)return}n.push(t)}),{reports:n,total:n.length}}catch(e){throw console.error("Error getting inspection reports:",e),e}},M=async(e,s,t)=>{try{let n=(0,_.JU)(S.db,"inspections",e);await (0,_.r7)(n,{...s,updatedAt:(0,_.Bt)()}),await U.Cv.logDataExport(t,"","inspection",{action:"update",inspectionId:e,updates:s})}catch(e){throw console.error("Error updating inspection report:",e),e}},R=async(e,s,t,n)=>{try{let a=Date.now(),i="inspection_".concat(e,"_").concat(a,"_").concat(s.name.replace(/[^a-zA-Z0-9.-]/g,"_")),l=(0,Z.iH)(S.tO,"inspections/".concat(e,"/").concat(i)),r=await (0,Z.KV)(l,s),c=await (0,Z.Jt)(r.ref),o={id:"photo_".concat(a),url:c,filename:s.name,caption:t.caption,areaId:t.areaId,itemId:t.itemId,timestamp:(0,_.Bt)(),uploadedBy:n},d=await E(e);if(!d)throw Error("Inspection not found");let p=[...d.photos,o];return await M(e,{photos:p},n),await U.Cv.logDataExport(n,"","inspection",{action:"upload_photo",inspectionId:e,photoId:o.id,filename:s.name}),o.id}catch(e){throw console.error("Error uploading inspection photo:",e),e}},q=async(e,s,t,n)=>{try{let a=await E(e);if(!a)throw Error("Inspection not found");let i=a.areas.map(e=>e.id===s?{...e,...t}:e);await M(e,{areas:i},n)}catch(e){throw console.error("Error updating inspection area:",e),e}},F=async(e,s,t,n,a)=>{try{let i=await E(e);if(!i)throw Error("Inspection not found");let l=i.areas.map(e=>{if(e.id===s){let s=e.items.map(e=>e.id===t?{...e,...n}:e);return{...e,items:s}}return e});await M(e,{areas:l},a)}catch(e){throw console.error("Error updating inspection item:",e),e}},O=async(e,s,t)=>{try{let n=await E(e);if(!n)throw Error("Inspection not found");let a={...s,id:"issue_".concat(Date.now()),resolved:!1},i=[...n.issues,a];return await M(e,{issues:i},t),a.id}catch(e){throw console.error("Error adding inspection issue:",e),e}},z=async(e,s,t)=>{try{let n={status:"completed",completedDate:(0,_.Bt)(),overallCondition:s.overallCondition,recommendations:s.recommendations,followUpRequired:s.followUpRequired,followUpNotes:s.followUpNotes};s.followUpDate&&(n.followUpDate=_.EK.fromDate(s.followUpDate)),s.tenantSignature&&(n.tenant={...n.tenant,signature:s.tenantSignature}),await M(e,n,t),await U.Cv.logDataExport(t,"","inspection",{action:"complete",inspectionId:e,overallCondition:s.overallCondition})}catch(e){throw console.error("Error completing inspection:",e),e}},L=async(e,s)=>{try{let n=await E(e);if(!n)throw Error("Inspection not found");let a=B(n),i=new Blob([a],{type:"text/html"}),l=new File([i],"inspection-report-".concat(e,".html"),{type:"text/html"}),{uploadDocument:r}=await t.e(409).then(t.bind(t,10409)),c=await r(l,{name:"Inspection Report - ".concat(n.inspectionType),description:"Inspection report for ".concat(n.purpose),category:"inspection_reports",tags:["inspection","report",n.inspectionType],relatedResource:{type:"property",id:n.propertyId,name:"Property ".concat(n.propertyId)},accessLevel:"private"},s,"System","system");return await M(e,{reportGenerated:!0,reportUrl:c},s),await U.Cv.logDataExport(s,"","inspection",{action:"generate_report",inspectionId:e,documentId:c}),c}catch(e){throw console.error("Error generating inspection report PDF:",e),e}},B=e=>{let s=e.issues.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{});return"\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Inspection Report - ".concat(e.id,'</title>\n      <style>\n        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }\n        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }\n        .section { margin-bottom: 30px; }\n        .area { margin-bottom: 20px; border: 1px solid #ddd; padding: 15px; }\n        .item { margin-left: 20px; margin-bottom: 10px; }\n        .condition { padding: 3px 8px; border-radius: 3px; font-size: 12px; }\n        .excellent { background-color: #dcfce7; color: #166534; }\n        .good { background-color: #dbeafe; color: #1e40af; }\n        .fair { background-color: #fef3c7; color: #92400e; }\n        .poor { background-color: #fed7d7; color: #c53030; }\n        .critical { background-color: #fee2e2; color: #dc2626; }\n        .issue { margin-bottom: 15px; padding: 10px; border-left: 4px solid #dc2626; background-color: #fef2f2; }\n        .photo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 10px 0; }\n        .photo { max-width: 100%; height: auto; border: 1px solid #ddd; }\n      </style>\n    </head>\n    <body>\n      <div class="header">\n        <h1>Property Inspection Report</h1>\n        <p><strong>Inspection ID:</strong> ').concat(e.id,"</p>\n        <p><strong>Date:</strong> ").concat(e.scheduledDate.toDate().toLocaleDateString(),"</p>\n        <p><strong>Inspector:</strong> ").concat(e.inspector.name,"</p>\n        <p><strong>Type:</strong> ").concat(e.inspectionType.replace("_"," ").toUpperCase(),'</p>\n        <p><strong>Overall Condition:</strong> <span class="condition ').concat(e.overallCondition,'">').concat(e.overallCondition.toUpperCase(),'</span></p>\n      </div>\n      \n      <div class="section">\n        <h2>Property Details</h2>\n        <p><strong>Property ID:</strong> ').concat(e.propertyId,"</p>\n        ").concat(e.unitId?"<p><strong>Unit ID:</strong> ".concat(e.unitId,"</p>"):"","\n        <p><strong>Purpose:</strong> ").concat(e.purpose,'</p>\n      </div>\n      \n      <div class="section">\n        <h2>Inspection Areas</h2>\n        ').concat(e.areas.map(e=>'\n          <div class="area">\n            <h3>'.concat(e.name,' <span class="condition ').concat(e.condition,'">').concat(e.condition.toUpperCase(),"</span></h3>\n            ").concat(e.notes?"<p><em>".concat(e.notes,"</em></p>"):"","\n            ").concat(e.items.map(e=>'\n              <div class="item">\n                <strong>'.concat(e.name,':</strong> \n                <span class="condition ').concat(e.condition,'">').concat(e.condition.replace("_"," ").toUpperCase(),"</span>\n                ").concat(e.requiresAttention?' <strong style="color: red;">(Requires Attention)</strong>':"","\n                ").concat(e.notes?"<br><em>".concat(e.notes,"</em>"):"","\n                ").concat(e.estimatedCost?"<br><strong>Estimated Cost:</strong> $".concat(e.estimatedCost):"","\n              </div>\n            ")).join(""),"\n          </div>\n        ")).join(""),"\n      </div>\n      \n      ").concat(e.issues.length>0?'\n        <div class="section">\n          <h2>Issues Identified</h2>\n          '.concat(Object.entries(s).map(e=>{let[s,t]=e;return"\n            <h3>".concat(s.toUpperCase(),"</h3>\n            ").concat(t.map(e=>'\n              <div class="issue">\n                <h4>'.concat(e.title,' <span class="condition ').concat(e.severity,'">').concat(e.severity.toUpperCase(),"</span></h4>\n                <p><strong>Location:</strong> ").concat(e.location,"</p>\n                <p><strong>Description:</strong> ").concat(e.description,"</p>\n                <p><strong>Recommended Action:</strong> ").concat(e.recommendedAction,"</p>\n                ").concat(e.estimatedCost?"<p><strong>Estimated Cost:</strong> $".concat(e.estimatedCost,"</p>"):"","\n                ").concat(e.requiresImmediateAttention?'<p style="color: red; font-weight: bold;">REQUIRES IMMEDIATE ATTENTION</p>':"","\n              </div>\n            ")).join(""),"\n          ")}).join(""),"\n        </div>\n      "):"","\n      \n      ").concat(e.photos.length>0?'\n        <div class="section">\n          <h2>Photos</h2>\n          <div class="photo-grid">\n            '.concat(e.photos.map(e=>'\n              <div>\n                <img src="'.concat(e.url,'" alt="').concat(e.caption||"Inspection photo",'" class="photo">\n                ').concat(e.caption?'<p style="font-size: 12px; text-align: center;">'.concat(e.caption,"</p>"):"","\n              </div>\n            ")).join(""),"\n          </div>\n        </div>\n      "):"",'\n      \n      <div class="section">\n        <h2>Recommendations</h2>\n        <p>').concat(e.recommendations||"No specific recommendations at this time.","</p>\n        \n        ").concat(e.followUpRequired?"\n          <h3>Follow-up Required</h3>\n          ".concat(e.followUpDate?"<p><strong>Follow-up Date:</strong> ".concat(e.followUpDate.toDate().toLocaleDateString(),"</p>"):"","\n          ").concat(e.followUpNotes?"<p><strong>Notes:</strong> ".concat(e.followUpNotes,"</p>"):"","\n        "):"<p><strong>No follow-up required.</strong></p>",'\n      </div>\n      \n      <div class="section">\n        <h2>Signatures</h2>\n        <div style="display: flex; justify-content: space-between; margin-top: 50px;">\n          <div style="text-align: center;">\n            <div style="border-bottom: 1px solid #000; width: 200px; height: 50px; margin-bottom: 10px;"></div>\n            <p><strong>Inspector Signature</strong></p>\n            <p>').concat(e.inspector.name,"</p>\n            <p>Date: ").concat(e.completedDate?e.completedDate.toDate().toLocaleDateString():"_____________","</p>\n          </div>\n          ").concat(e.tenant?'\n            <div style="text-align: center;">\n              <div style="border-bottom: 1px solid #000; width: 200px; height: 50px; margin-bottom: 10px;">\n                '.concat(e.tenant.signature?'<img src="'.concat(e.tenant.signature,'" style="max-height: 45px; max-width: 195px;" alt="Tenant Signature">'):"","\n              </div>\n              <p><strong>Tenant Signature</strong></p>\n              <p>").concat(e.tenant.name,"</p>\n              <p>Date: ").concat(e.completedDate?e.completedDate.toDate().toLocaleDateString():"_____________","</p>\n            </div>\n          "):"",'\n        </div>\n      </div>\n      \n      <div style="margin-top: 40px; text-align: center; font-size: 12px; color: #666;">\n        <p>This report was generated by MMG Property Consultancy on ').concat(new Date().toLocaleDateString(),"</p>\n        <p>For questions or concerns, contact: info@mmgproperty.com</p>\n      </div>\n    </body>\n    </html>\n  ")},V=async e=>{try{let{reports:s}=await A({propertyId:e,pageSize:1e3}),t={total:s.length,byStatus:{},byType:{},byCondition:{},recentReports:s.slice(0,5),pendingFollowUps:s.filter(e=>e.followUpRequired&&!e.followUpDate),overdueFollowUps:s.filter(e=>e.followUpRequired&&e.followUpDate&&e.followUpDate.toDate()<new Date),totalIssues:s.reduce((e,s)=>e+s.issues.length,0),criticalIssues:s.reduce((e,s)=>e+s.issues.filter(e=>"critical"===e.severity).length,0)};return s.forEach(e=>{t.byStatus[e.status]=(t.byStatus[e.status]||0)+1,t.byType[e.inspectionType]=(t.byType[e.inspectionType]||0)+1,t.byCondition[e.overallCondition]=(t.byCondition[e.overallCondition]||0)+1}),t}catch(e){throw console.error("Error getting inspection statistics:",e),e}};var Y=t(26815),W=t(76818),H=t(12339),G=t(53581),X=t(92735);function J(e){let{inspectionId:s,propertyId:t,unitId:l,onInspectionCreated:x}=e,{user:u}=(0,i.aC)(),v=(0,a.useRef)(null);(0,a.useRef)(null);let[w,N]=(0,a.useState)(null),[b,C]=(0,a.useState)(!1),[I,k]=(0,a.useState)(!1),[_,Z]=(0,a.useState)(""),[S,U]=(0,a.useState)(""),[Q,P]=(0,a.useState)("overview"),[A,M]=(0,a.useState)(!1),[B,V]=(0,a.useState)(!1),[J,K]=(0,a.useState)(!1),[$,ee]=(0,a.useState)({inspectionType:"routine",scheduledDate:new Date().toISOString().split("T")[0],purpose:"",inspector:{name:(null==u?void 0:u.name)||"",contact:""},tenant:{name:"",present:!1}}),[es,et]=(0,a.useState)({severity:"medium",category:"maintenance",title:"",description:"",location:"",estimatedCost:0,priority:5,requiresImmediateAttention:!1,recommendedAction:""}),[en,ea]=(0,a.useState)({overallCondition:"good",recommendations:"",followUpRequired:!1,followUpDate:"",followUpNotes:""});(0,a.useEffect)(()=>{s&&ei()},[s]);let ei=async()=>{if(s){C(!0);try{let e=await E(s);N(e)}catch(e){Z(e.message)}finally{C(!1)}}},el=async()=>{if(u&&t){k(!0),Z("");try{let e={propertyId:t,unitId:l,inspectionType:$.inspectionType,status:"in_progress",scheduledDate:new Date($.scheduledDate),inspector:{id:u.id,name:$.inspector.name,role:u.role,contact:$.inspector.contact},tenant:$.tenant.name?{id:"unknown",name:$.tenant.name,present:$.tenant.present}:void 0,purpose:$.purpose,overallCondition:"good",recommendations:"",followUpRequired:!1,reportGenerated:!1},s=await T(e,u.id,u.name);U("Inspection created successfully!"),x&&x(s)}catch(e){Z(e.message)}finally{k(!1)}}},er=async(e,s)=>{if(w&&u)try{await q(w.id,e,s,u.id),await ei(),U("Area updated successfully!")}catch(e){Z(e.message)}},ec=async(e,s,t)=>{if(w&&u)try{await F(w.id,e,s,t,u.id),await ei()}catch(e){Z(e.message)}},eo=async(e,s,t)=>{if(w&&u)try{await R(w.id,e,{areaId:s,itemId:t,caption:""},u.id),await ei(),U("Photo uploaded successfully!")}catch(e){Z(e.message)}},ed=async()=>{if(w&&u)try{await O(w.id,{...es,photos:[]},u.id),et({severity:"medium",category:"maintenance",title:"",description:"",location:"",estimatedCost:0,priority:5,requiresImmediateAttention:!1,recommendedAction:""}),M(!1),await ei(),U("Issue added successfully!")}catch(e){Z(e.message)}},ep=async()=>{if(w&&u)try{await z(w.id,{...en,followUpDate:en.followUpDate?new Date(en.followUpDate):void 0},u.id),await ei(),U("Inspection completed successfully!")}catch(e){Z(e.message)}},eh=async()=>{if(w&&u)try{await L(w.id,u.id),U("PDF report generated successfully!")}catch(e){Z(e.message)}},em=e=>({excellent:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800",not_applicable:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800",ex=e=>({low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return b?(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)(r.Zb,{children:(0,n.jsxs)(r.aY,{className:"pt-6",children:[(0,n.jsx)(m.O,{className:"h-8 w-64 mb-4"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,n.jsx)(m.O,{className:"h-32"},e))})]})})}):s&&w?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Inspection Report"}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:[w.purpose," - ",(0,D.WU)(w.scheduledDate.toDate(),"PPP")]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.C,{className:em(w.overallCondition),children:w.overallCondition.toUpperCase()}),(0,n.jsx)(c.C,{variant:"completed"===w.status?"default":"secondary",children:w.status.replace("_"," ").toUpperCase()})]})]}),_&&(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsx)(h.X,{children:_})]}),S&&(0,n.jsxs)(h.bZ,{children:[(0,n.jsx)(g.Z,{className:"h-4 w-4"}),(0,n.jsx)(h.X,{children:S})]}),(0,n.jsxs)(H.mQ,{value:Q,onValueChange:P,className:"w-full",children:[(0,n.jsxs)(H.dr,{className:"grid w-full grid-cols-4",children:[(0,n.jsx)(H.SP,{value:"overview",children:"Overview"}),(0,n.jsx)(H.SP,{value:"areas",children:"Areas"}),(0,n.jsx)(H.SP,{value:"issues",children:"Issues"}),(0,n.jsx)(H.SP,{value:"complete",children:"Complete"})]}),(0,n.jsxs)(H.nU,{value:"overview",className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{className:"text-sm",children:"Inspector"})}),(0,n.jsx)(r.aY,{children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"font-medium",children:w.inspector.name}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:w.inspector.role}),w.inspector.contact&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:w.inspector.contact})]})})]}),w.tenant&&(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{className:"text-sm",children:"Tenant"})}),(0,n.jsx)(r.aY,{children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"font-medium",children:w.tenant.name}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:w.tenant.present?"Present during inspection":"Not present"})]})})]}),(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{className:"text-sm",children:"Summary"})}),(0,n.jsx)(r.aY,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm",children:"Areas:"}),(0,n.jsx)("span",{className:"font-medium",children:w.areas.length})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm",children:"Issues:"}),(0,n.jsx)("span",{className:"font-medium",children:w.issues.length})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm",children:"Photos:"}),(0,n.jsx)("span",{className:"font-medium",children:w.photos.length})]})]})})]})]}),w.photos.length>0&&(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{children:"Photos"})}),(0,n.jsx)(r.aY,{children:(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:w.photos.map(e=>(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("img",{src:e.url,alt:e.caption||"Inspection photo",className:"w-full h-32 object-cover rounded-lg border"}),e.caption&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:e.caption})]},e.id))})})]})]}),(0,n.jsx)(H.nU,{value:"areas",className:"space-y-4",children:w.areas.map(e=>(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)(r.ll,{children:e.name}),(0,n.jsx)(c.C,{className:em(e.condition),children:e.condition.toUpperCase()})]})}),(0,n.jsxs)(r.aY,{className:"space-y-4",children:[(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:e.items.map(s=>(0,n.jsxs)("div",{className:"border rounded-lg p-3 space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsx)("h4",{className:"font-medium text-sm",children:s.name}),(0,n.jsxs)(p.Ph,{value:s.condition,onValueChange:t=>ec(e.id,s.id,{condition:t}),children:[(0,n.jsx)(p.i4,{className:"w-24 h-8",children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"excellent",children:"Excellent"}),(0,n.jsx)(p.Ql,{value:"good",children:"Good"}),(0,n.jsx)(p.Ql,{value:"fair",children:"Fair"}),(0,n.jsx)(p.Ql,{value:"poor",children:"Poor"}),(0,n.jsx)(p.Ql,{value:"critical",children:"Critical"}),(0,n.jsx)(p.Ql,{value:"not_applicable",children:"N/A"})]})]})]}),(0,n.jsx)(c.C,{className:em(s.condition),size:"sm",children:s.condition.replace("_"," ").toUpperCase()}),s.requiresAttention&&(0,n.jsxs)("div",{className:"flex items-center text-orange-600 text-xs",children:[(0,n.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Requires Attention"]}),s.notes&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:s.notes})]},s.id))}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("input",{type:"file",ref:v,accept:"image/*",onChange:s=>{var t;let n=null===(t=s.target.files)||void 0===t?void 0:t[0];n&&eo(n,e.id)},className:"hidden"}),(0,n.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},children:[(0,n.jsx)(G.Z,{className:"w-4 h-4 mr-2"}),"Add Photo"]}),(0,n.jsxs)(p.Ph,{value:e.condition,onValueChange:s=>er(e.id,{condition:s}),children:[(0,n.jsx)(p.i4,{className:"w-32",children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"excellent",children:"Excellent"}),(0,n.jsx)(p.Ql,{value:"good",children:"Good"}),(0,n.jsx)(p.Ql,{value:"fair",children:"Fair"}),(0,n.jsx)(p.Ql,{value:"poor",children:"Poor"}),(0,n.jsx)(p.Ql,{value:"critical",children:"Critical"})]})]})]})]})]},e.id))}),(0,n.jsxs)(H.nU,{value:"issues",className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold",children:["Issues (",w.issues.length,")"]}),(0,n.jsxs)(o.z,{onClick:()=>M(!0),children:[(0,n.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Add Issue"]})]}),0===w.issues.length?(0,n.jsx)(r.Zb,{children:(0,n.jsx)(r.aY,{className:"flex items-center justify-center h-32",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(g.Z,{className:"mx-auto h-8 w-8 text-green-500 mb-2"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"No issues found"})]})})}):(0,n.jsx)("div",{className:"space-y-3",children:w.issues.map(e=>(0,n.jsx)(r.Zb,{children:(0,n.jsxs)(r.aY,{className:"pt-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold",children:e.title}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.location})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(c.C,{className:ex(e.severity),children:e.severity.toUpperCase()}),(0,n.jsx)(c.C,{variant:"outline",children:e.category.replace("_"," ").toUpperCase()})]})]}),(0,n.jsx)("p",{className:"text-sm mb-3",children:e.description}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Recommended Action:"})," ",e.recommendedAction]}),e.estimatedCost&&(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Estimated Cost:"})," $",e.estimatedCost]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Priority:"})," ",e.priority,"/10"]}),e.requiresImmediateAttention&&(0,n.jsx)("div",{className:"text-red-600 font-medium",children:"⚠️ Requires Immediate Attention"})]})]})},e.id))}),A&&(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{children:"Add New Issue"})}),(0,n.jsxs)(r.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Title"}),(0,n.jsx)(d.I,{value:es.title,onChange:e=>et(s=>({...s,title:e.target.value})),placeholder:"Issue title"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Location"}),(0,n.jsx)(d.I,{value:es.location,onChange:e=>et(s=>({...s,location:e.target.value})),placeholder:"Where is this issue located?"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Severity"}),(0,n.jsxs)(p.Ph,{value:es.severity,onValueChange:e=>et(s=>({...s,severity:e})),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"low",children:"Low"}),(0,n.jsx)(p.Ql,{value:"medium",children:"Medium"}),(0,n.jsx)(p.Ql,{value:"high",children:"High"}),(0,n.jsx)(p.Ql,{value:"critical",children:"Critical"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Category"}),(0,n.jsxs)(p.Ph,{value:es.category,onValueChange:e=>et(s=>({...s,category:e})),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"safety",children:"Safety"}),(0,n.jsx)(p.Ql,{value:"maintenance",children:"Maintenance"}),(0,n.jsx)(p.Ql,{value:"compliance",children:"Compliance"}),(0,n.jsx)(p.Ql,{value:"cosmetic",children:"Cosmetic"}),(0,n.jsx)(p.Ql,{value:"structural",children:"Structural"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Estimated Cost"}),(0,n.jsx)(d.I,{type:"number",value:es.estimatedCost,onChange:e=>et(s=>({...s,estimatedCost:parseFloat(e.target.value)||0})),placeholder:"0"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Priority (1-10)"}),(0,n.jsx)(d.I,{type:"number",min:"1",max:"10",value:es.priority,onChange:e=>et(s=>({...s,priority:parseInt(e.target.value)||5}))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Description"}),(0,n.jsx)(W.g,{value:es.description,onChange:e=>et(s=>({...s,description:e.target.value})),placeholder:"Detailed description of the issue"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Recommended Action"}),(0,n.jsx)(W.g,{value:es.recommendedAction,onChange:e=>et(s=>({...s,recommendedAction:e.target.value})),placeholder:"What should be done to resolve this issue?"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",id:"immediate",checked:es.requiresImmediateAttention,onChange:e=>et(s=>({...s,requiresImmediateAttention:e.target.checked}))}),(0,n.jsx)(Y._,{htmlFor:"immediate",children:"Requires immediate attention"})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)(o.z,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),(0,n.jsx)(o.z,{onClick:ed,children:"Add Issue"})]})]})]})]}),(0,n.jsx)(H.nU,{value:"complete",className:"space-y-4",children:(0,n.jsxs)(r.Zb,{children:[(0,n.jsxs)(r.Ol,{children:[(0,n.jsx)(r.ll,{children:"Complete Inspection"}),(0,n.jsx)(r.SZ,{children:"Finalize the inspection with overall assessment and recommendations"})]}),(0,n.jsxs)(r.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Overall Condition"}),(0,n.jsxs)(p.Ph,{value:en.overallCondition,onValueChange:e=>ea(s=>({...s,overallCondition:e})),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"excellent",children:"Excellent"}),(0,n.jsx)(p.Ql,{value:"good",children:"Good"}),(0,n.jsx)(p.Ql,{value:"fair",children:"Fair"}),(0,n.jsx)(p.Ql,{value:"poor",children:"Poor"}),(0,n.jsx)(p.Ql,{value:"critical",children:"Critical"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Follow-up Required"}),(0,n.jsxs)(p.Ph,{value:en.followUpRequired.toString(),onValueChange:e=>ea(s=>({...s,followUpRequired:"true"===e})),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"false",children:"No"}),(0,n.jsx)(p.Ql,{value:"true",children:"Yes"})]})]})]}),en.followUpRequired&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Follow-up Date"}),(0,n.jsx)(d.I,{type:"date",value:en.followUpDate,onChange:e=>ea(s=>({...s,followUpDate:e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Recommendations"}),(0,n.jsx)(W.g,{value:en.recommendations,onChange:e=>ea(s=>({...s,recommendations:e.target.value})),placeholder:"Overall recommendations and summary",rows:4})]}),en.followUpRequired&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Follow-up Notes"}),(0,n.jsx)(W.g,{value:en.followUpNotes,onChange:e=>ea(s=>({...s,followUpNotes:e.target.value})),placeholder:"Notes about the follow-up required",rows:3})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)(o.z,{variant:"outline",onClick:eh,children:[(0,n.jsx)(X.Z,{className:"w-4 h-4 mr-2"}),"Generate PDF"]}),(0,n.jsxs)(o.z,{onClick:ep,disabled:"completed"===w.status,children:[(0,n.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"completed"===w.status?"Completed":"Complete Inspection"]})]})]})]})})]})]}):(0,n.jsxs)(r.Zb,{children:[(0,n.jsxs)(r.Ol,{children:[(0,n.jsx)(r.ll,{children:"Create New Inspection"}),(0,n.jsx)(r.SZ,{children:"Schedule and conduct a property inspection"})]}),(0,n.jsxs)(r.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Inspection Type"}),(0,n.jsxs)(p.Ph,{value:$.inspectionType,onValueChange:e=>ee(s=>({...s,inspectionType:e})),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"move_in",children:"Move In"}),(0,n.jsx)(p.Ql,{value:"move_out",children:"Move Out"}),(0,n.jsx)(p.Ql,{value:"routine",children:"Routine"}),(0,n.jsx)(p.Ql,{value:"maintenance",children:"Maintenance"}),(0,n.jsx)(p.Ql,{value:"safety",children:"Safety"}),(0,n.jsx)(p.Ql,{value:"compliance",children:"Compliance"}),(0,n.jsx)(p.Ql,{value:"damage_assessment",children:"Damage Assessment"}),(0,n.jsx)(p.Ql,{value:"insurance",children:"Insurance"}),(0,n.jsx)(p.Ql,{value:"pre_listing",children:"Pre-Listing"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Scheduled Date"}),(0,n.jsx)(d.I,{type:"date",value:$.scheduledDate,onChange:e=>ee(s=>({...s,scheduledDate:e.target.value}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Inspector Name"}),(0,n.jsx)(d.I,{value:$.inspector.name,onChange:e=>ee(s=>({...s,inspector:{...s.inspector,name:e.target.value}}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Inspector Contact"}),(0,n.jsx)(d.I,{value:$.inspector.contact,onChange:e=>ee(s=>({...s,inspector:{...s.inspector,contact:e.target.value}})),placeholder:"Phone or email"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Tenant Name (Optional)"}),(0,n.jsx)(d.I,{value:$.tenant.name,onChange:e=>ee(s=>({...s,tenant:{...s.tenant,name:e.target.value}})),placeholder:"If tenant will be present"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(Y._,{children:"Purpose"}),(0,n.jsx)(W.g,{value:$.purpose,onChange:e=>ee(s=>({...s,purpose:e.target.value})),placeholder:"Describe the purpose of this inspection"})]})]}),_&&(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsx)(h.X,{children:_})]}),S&&(0,n.jsxs)(h.bZ,{children:[(0,n.jsx)(g.Z,{className:"h-4 w-4"}),(0,n.jsx)(h.X,{children:S})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(o.z,{onClick:el,disabled:I,children:I?"Creating...":"Create Inspection"})})]})]})}function K(){let{user:e,loading:s}=(0,i.aC)(),[t,_]=(0,a.useState)([]),[Z,S]=(0,a.useState)(null),[U,Q]=(0,a.useState)(!0),[P,T]=(0,a.useState)(""),[E,M]=(0,a.useState)(null),[R,q]=(0,a.useState)(!1),[F,O]=(0,a.useState)({search:"",status:"",inspectionType:"",condition:"",dateFrom:"",dateTo:""});if((0,a.useEffect)(()=>{e&&z()},[e]),s)return(0,n.jsx)("div",{children:"Loading..."});if(e||(0,l.redirect)("/login"),!["admin","agent"].includes(e.role))return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,n.jsx)("p",{className:"text-gray-600",children:"You don't have permission to manage inspections."})]})});let z=async()=>{Q(!0);try{let[e,s]=await Promise.all([A({status:F.status||void 0,inspectionType:F.inspectionType||void 0,pageSize:50}),V()]);_(e.reports),S(s)}catch(e){T(e.message)}finally{Q(!1)}},L=(e,s)=>{O(t=>({...t,[e]:s}))},B=t.filter(e=>!(F.search&&!e.purpose.toLowerCase().includes(F.search.toLowerCase())&&!e.inspector.name.toLowerCase().includes(F.search.toLowerCase())||F.condition&&e.overallCondition!==F.condition||F.dateFrom&&e.scheduledDate.toDate()<new Date(F.dateFrom)||F.dateTo&&e.scheduledDate.toDate()>new Date(F.dateTo))),Y=e=>({scheduled:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",W=e=>({excellent:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",H=e=>{let s={scheduled:x.Z,in_progress:u.Z,completed:g.Z,cancelled:j.Z}[e]||v.Z;return(0,n.jsx)(s,{className:"w-4 h-4"})};return U?(0,n.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,n.jsx)(m.O,{className:"h-8 w-64"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,n.jsx)(m.O,{className:"h-24"},e))}),(0,n.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,n.jsx)(m.O,{className:"h-32 w-full"},e))})]}):E?(0,n.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(o.z,{variant:"outline",onClick:()=>M(null),children:"← Back to Inspections"})}),(0,n.jsx)(J,{inspectionId:E})]}):R?(0,n.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(o.z,{variant:"outline",onClick:()=>q(!1),children:"← Back to Inspections"})}),(0,n.jsx)(J,{onInspectionCreated:e=>{q(!1),M(e)}})]}):(0,n.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Property Inspections"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage property inspections and reports"})]}),(0,n.jsxs)(o.z,{onClick:()=>q(!0),children:[(0,n.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"New Inspection"]})]}),P&&(0,n.jsxs)(h.bZ,{variant:"destructive",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsx)(h.X,{children:P})]}),Z&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsx)(r.Zb,{children:(0,n.jsx)(r.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Inspections"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:Z.total})]}),(0,n.jsx)(v.Z,{className:"h-8 w-8 text-muted-foreground"})]})})}),(0,n.jsx)(r.Zb,{children:(0,n.jsx)(r.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Critical Issues"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-red-600",children:Z.criticalIssues})]}),(0,n.jsx)(f.Z,{className:"h-8 w-8 text-red-500"})]})})}),(0,n.jsx)(r.Zb,{children:(0,n.jsx)(r.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Follow-ups"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:Z.pendingFollowUps.length})]}),(0,n.jsx)(u.Z,{className:"h-8 w-8 text-orange-500"})]})})}),(0,n.jsx)(r.Zb,{children:(0,n.jsx)(r.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Issues"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:Z.totalIssues})]}),(0,n.jsx)(w.Z,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsxs)(r.ll,{className:"flex items-center",children:[(0,n.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Filters"]})}),(0,n.jsx)(r.aY,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,n.jsx)(d.I,{placeholder:"Search inspections...",value:F.search,onChange:e=>L("search",e.target.value),className:"pl-9"})]})}),(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)(p.Ph,{value:F.status,onValueChange:e=>L("status",e),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{placeholder:"Status"})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"",children:"All Statuses"}),(0,n.jsx)(p.Ql,{value:"scheduled",children:"Scheduled"}),(0,n.jsx)(p.Ql,{value:"in_progress",children:"In Progress"}),(0,n.jsx)(p.Ql,{value:"completed",children:"Completed"}),(0,n.jsx)(p.Ql,{value:"cancelled",children:"Cancelled"})]})]})}),(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)(p.Ph,{value:F.inspectionType,onValueChange:e=>L("inspectionType",e),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{placeholder:"Type"})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"",children:"All Types"}),(0,n.jsx)(p.Ql,{value:"move_in",children:"Move In"}),(0,n.jsx)(p.Ql,{value:"move_out",children:"Move Out"}),(0,n.jsx)(p.Ql,{value:"routine",children:"Routine"}),(0,n.jsx)(p.Ql,{value:"maintenance",children:"Maintenance"}),(0,n.jsx)(p.Ql,{value:"safety",children:"Safety"}),(0,n.jsx)(p.Ql,{value:"compliance",children:"Compliance"}),(0,n.jsx)(p.Ql,{value:"damage_assessment",children:"Damage Assessment"}),(0,n.jsx)(p.Ql,{value:"insurance",children:"Insurance"}),(0,n.jsx)(p.Ql,{value:"pre_listing",children:"Pre-Listing"})]})]})}),(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)(p.Ph,{value:F.condition,onValueChange:e=>L("condition",e),children:[(0,n.jsx)(p.i4,{children:(0,n.jsx)(p.ki,{placeholder:"Condition"})}),(0,n.jsxs)(p.Bw,{children:[(0,n.jsx)(p.Ql,{value:"",children:"All Conditions"}),(0,n.jsx)(p.Ql,{value:"excellent",children:"Excellent"}),(0,n.jsx)(p.Ql,{value:"good",children:"Good"}),(0,n.jsx)(p.Ql,{value:"fair",children:"Fair"}),(0,n.jsx)(p.Ql,{value:"poor",children:"Poor"}),(0,n.jsx)(p.Ql,{value:"critical",children:"Critical"})]})]})}),(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)(d.I,{type:"date",placeholder:"From Date",value:F.dateFrom,onChange:e=>L("dateFrom",e.target.value)})}),(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)(d.I,{type:"date",placeholder:"To Date",value:F.dateTo,onChange:e=>L("dateTo",e.target.value)})})]})})]}),(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsxs)(r.ll,{children:["Inspections (",B.length,")"]})}),(0,n.jsx)(r.aY,{children:0===B.length?(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)(v.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No inspections found"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Create your first property inspection."}),(0,n.jsxs)(o.z,{onClick:()=>q(!0),children:[(0,n.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"New Inspection"]})]}):(0,n.jsx)("div",{className:"space-y-4",children:B.map(e=>(0,n.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>M(e.id),children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold",children:e.purpose}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.inspectionType.replace("_"," ").toUpperCase()," | Property ",e.propertyId.slice(0,8),"..."]})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(c.C,{className:Y(e.status),children:[H(e.status),(0,n.jsx)("span",{className:"ml-1",children:e.status.replace("_"," ")})]}),(0,n.jsx)(c.C,{className:W(e.overallCondition),children:e.overallCondition.toUpperCase()})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),(0,D.WU)(e.scheduledDate.toDate(),"MMM dd, yyyy")]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(C.Z,{className:"w-4 h-4 mr-2"}),e.inspector.name]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(I.Z,{className:"w-4 h-4 mr-2"}),e.areas.length," areas, ",e.issues.length," issues"]})]}),e.followUpRequired&&(0,n.jsxs)("div",{className:"mt-3 flex items-center text-orange-600 text-sm",children:[(0,n.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"Follow-up required",e.followUpDate&&(0,n.jsxs)("span",{className:"ml-2",children:["by ",(0,D.WU)(e.followUpDate.toDate(),"MMM dd, yyyy")]})]}),(0,n.jsx)("div",{className:"mt-3 flex justify-end",children:(0,n.jsxs)(o.z,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),M(e.id)},children:[(0,n.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"View Details"]})})]},e.id))})})]})]})}},12339:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return r},nU:function(){return d}});var n=t(57437),a=t(2265),i=t(20271),l=t(94508);let r=i.fC,c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(i.aV,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});c.displayName=i.aV.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(i.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});o.displayName=i.xz.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(i.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});d.displayName=i.VY.displayName},60044:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},31047:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},53581:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},41671:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},92735:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},48736:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},90740:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},99397:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},70525:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},76865:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},92369:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6394:function(e,s,t){"use strict";t.d(s,{f:function(){return r}});var n=t(2265),a=t(66840),i=t(57437),l=n.forwardRef((e,s)=>(0,i.jsx)(a.WV.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var r=l}},function(e){e.O(0,[4358,139,92,5189,7746,3825,2093,4193,271,9984,6729,2971,2117,1744],function(){return e(e.s=60673)}),_N_E=e.O()}]);